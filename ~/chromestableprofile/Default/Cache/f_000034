{
  "version": 3,
  "file": "/srv/server/metaserver/metaserver/static/coffee/compiled/packaged/core.js",
  "sources": [
    "../modules/core/exception.js",
    "../modules/core/uri.js",
    "../modules/core/browser.js",
    "../modules/core/instantiate.js",
    "../modules/core/controller_registry.js",
    "../modules/core/cookies.js",
    "../modules/core/dom.js",
    "../modules/core/html.js",
    "../modules/core/kwargs.js",
    "../../../../../../../../db/metaserver/metaserver/static/javascript/external/sha1.js",
    "../modules/core/i18n.js",
    "../modules/core/notify.js",
    "../modules/core/ordered_dictionary.js",
    "../modules/clean/hi_res.js",
    "../modules/clean/job_progress.js",
    "../modules/clean/storage.js",
    "../modules/clean/undo.js",
    "../modules/clean/ajax.js",
    "../packaged/core-definition.js"
  ],
  "names": [],
  "mappings": "AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7SA,AD8SA;AC7SA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnBA,ADoBA;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjEA,ADkEA;ACjEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1dA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxEA,ADyEA;ACxEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7CA,AD8CA;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzxBA;AACA",
  "sourcesContent": [
    "// Generated by CoffeeScript 1.7.1\ndefine('modules/core/exception',[], function() {\n  var JSException;\n  JSException = (function() {\n    function JSException() {}\n\n    JSException.strip_comments = function(js) {\n      return js.replace(/\\/\\/.*/g, \"\").replace(/\\/\\*[\\s\\S]*?\\*\\//g, \"\");\n    };\n\n    JSException.fn_body = function(f) {\n      var fbody;\n      fbody = JSException.strip_comments(f.toString());\n      fbody = fbody.replace(/[\\s]+/g, \" \");\n      if (fbody[0] === \"(\") {\n        fbody = fbody.substr(1);\n      }\n      if (fbody[fbody.length - 1] === \")\") {\n        fbody = fbody.substr(0, fbody.length - 1);\n      }\n      fbody = fbody.replace(\"function (\", \"function(\");\n      return fbody;\n    };\n\n    JSException.stackTrace = function() {\n      var caller, err, fingerprint, out, seen;\n      out = [];\n      seen = {};\n      caller = arguments.callee.caller;\n      while (caller) {\n        if (caller.__tb_ajax_info__) {\n          out.unshift(\"Ajax.DBRequest: \" + caller.__tb_ajax_info__);\n          break;\n        }\n        if (caller.__tb__) {\n          out = caller.__tb__.concat(out);\n          break;\n        }\n        fingerprint = JSException.fn_body(caller);\n        if (fingerprint in seen) {\n          break;\n        }\n        seen[fingerprint] = true;\n        out.unshift(fingerprint);\n        try {\n          caller = caller.caller;\n        } catch (_error) {\n          err = _error;\n          caller = null;\n          break;\n        }\n      }\n      return out;\n    };\n\n    JSException.reportException = function(e, f, l, tb, force, tags) {\n      var data, stack, stack_str;\n      if (!window.active_user_loaded) {\n        window.an_error_happened_before_loading = true;\n      } else {\n        window.an_error_happened_after_loading = true;\n      }\n      if ((window.reported_exception == null) || force) {\n        stack_str = \"\";\n        if (!tb) {\n          try {\n            stack = JSException.stackTrace();\n            stack.pop();\n            stack.pop();\n            tb = stack.join(\"\\\\n\");\n          } catch (_error) {}\n        }\n        if (!tags) {\n          tags = [];\n        }\n\n        /*global: jQuery may or may not exist, doesn't matter */\n\n        /*global: Trace may or may not exist, doesn't matter */\n        data = {\n          e: e,\n          f: f || window.location.href,\n          l: l || \"\",\n          loc: window.location.href,\n          ref: typeof Constants !== \"undefined\" && Constants !== null ? Constants.referrer : void 0,\n          tb: tb,\n          trace: typeof Trace !== \"undefined\" && Trace !== null ? Trace.get() : void 0,\n          tags: JSON.stringify(tags)\n        };\n        if (typeof jQuery !== \"undefined\" && jQuery !== null) {\n          jQuery.ajax({\n            url: \"/jse\",\n            type: \"POST\",\n            data: data\n          });\n        }\n        window.reported_exception = e;\n        if (!(typeof Constants !== \"undefined\" && Constants !== null ? Constants.IS_PROD : void 0) && window.sessionStorage) {\n          data.source = 'exception.coffee';\n          return window.sessionStorage.setItem('reported_exception', JSON.stringify(data));\n        }\n      }\n    };\n\n    JSException.alert = function(x) {\n      if (typeof jQuery !== \"undefined\" && jQuery !== null) {\n        jQuery.ajax({\n          url: \"/tormod\",\n          type: \"POST\",\n          data: {\n            tor: \"\" + x,\n            mod: window.location.href,\n            ssk: JSException.stackTrace().join(\"\\n\\n\"),\n            oog: document.documentElement.innerHTML\n          }\n        });\n      }\n      return window.alertd(x);\n    };\n\n    JSException.assert = function(cond, msg, force_report, exc_tags, should_throw) {\n      var stack;\n      if (force_report == null) {\n        force_report = true;\n      }\n      if (exc_tags == null) {\n        exc_tags = [];\n      }\n      if (should_throw == null) {\n        should_throw = true;\n      }\n      if (!cond) {\n        msg = \"Assertion Error: \" + msg;\n        if (!(typeof Constants !== \"undefined\" && Constants !== null ? Constants.IS_PROD : void 0)) {\n          if (typeof console !== \"undefined\" && console !== null) {\n            if (typeof console.trace === \"function\") {\n              console.trace();\n            }\n          }\n          alertd(msg);\n        }\n        stack = JSException.stackTrace();\n        stack.pop();\n        JSException.reportException(msg, window.location.href, \"\", stack.join(\"\\n\"), force_report, exc_tags);\n        if (should_throw) {\n          throw msg;\n        }\n      }\n    };\n\n    return JSException;\n\n  })();\n  window.onerror = function(e, f, l) {\n    return JSException.reportException(e, f, l);\n  };\n  window.alertd = window.alert;\n  window.alert = JSException.alert;\n  window.assert = JSException.assert;\n  window.global_report_exception = JSException.reportException;\n  window.get_stack_rep = JSException.stackTrace;\n  return JSException;\n});\n\n//# sourceMappingURL=exception.map\n;\n",
    "// Generated by CoffeeScript 1.7.1\ndefine('modules/core/uri',['modules/core/exception'], function(JSException) {\n  var QueryComponent, URI;\n  URI = (function() {\n    function URI(x, y) {\n      var k, overrides, params, v;\n      if (!(this instanceof URI)) {\n        return new URI(x, y);\n      }\n      this._query = new QueryComponent;\n      params = {};\n      if (typeof x === 'string' || x instanceof URI) {\n        if (!(typeof Constants !== \"undefined\" && Constants !== null ? Constants.IS_PROD : void 0)) {\n          throw new Error('URI/uri string passed into URI constructor.  Use URI.parse instead.');\n        }\n        params = URI.parse(x).toObject();\n      } else if (typeof x === 'object') {\n        params = x;\n      }\n      if (y && !(typeof Constants !== \"undefined\" && Constants !== null ? Constants.IS_PROD : void 0)) {\n        throw new Error('Multiple arguments passed into URI constructor.');\n      }\n      overrides = y || {};\n      for (k in overrides) {\n        v = overrides[k];\n        params[k] = v;\n      }\n      this.initFromObject(params);\n    }\n\n    URI.prototype.initFromObject = function(_arg) {\n      var query, scheme, _ref;\n      _ref = _arg != null ? _arg : {}, scheme = _ref.scheme, this.authority = _ref.authority, this.path = _ref.path, query = _ref.query, this.fragment = _ref.fragment;\n      this.setScheme(scheme);\n      return this.setQuery(query);\n    };\n\n    URI.parse = function(uri_string) {\n      var matches, uri, _authority, _fragment, _path, _query_string, _scheme, _uri;\n      assert(uri_string != null, 'must pass in a valid url-encoded string');\n      matches = String(uri_string).match(URI.REGEXP) || [];\n      _uri = matches[0], _scheme = matches[1], _authority = matches[2], _path = matches[3], _query_string = matches[4], _fragment = matches[5];\n      uri = new URI();\n      uri.setScheme(_scheme);\n      uri.setAuthority(URI.decode(_authority));\n      uri.setPath(URI.decode(_path));\n      uri.setQuery(QueryComponent.parse_string(_query_string));\n      uri.setFragment(URI.decode(_fragment));\n      return uri;\n    };\n\n    URI.prototype.getScheme = function() {\n      return this.scheme || '';\n    };\n\n    URI.prototype.setScheme = function(scheme) {\n      assert(!scheme || scheme.match(URI.SCHEME_REGEXP, 'Invalid scheme'));\n      this.scheme = scheme;\n      return this;\n    };\n\n    URI.prototype.getAuthority = function() {\n      return this.authority || '';\n    };\n\n    URI.prototype.setAuthority = function(authority) {\n      this.authority = authority;\n      return this;\n    };\n\n    URI.prototype.getPath = function() {\n      return this.path || '';\n    };\n\n    URI.prototype.setPath = function(path) {\n      this.path = path;\n      return this;\n    };\n\n    URI.prototype.getFragment = function() {\n      return this.fragment || '';\n    };\n\n    URI.prototype.setFragment = function(fragment) {\n      this.fragment = fragment;\n      return this;\n    };\n\n    URI.prototype.getQuery = function() {\n      return this._query.dict;\n    };\n\n    URI.prototype.setQuery = function(query) {\n      if (query == null) {\n        query = {};\n      }\n      this._query = new QueryComponent(query);\n      return this;\n    };\n\n    URI.prototype.updateQuery = function(first, second) {\n      if (second == null) {\n        second = null;\n      }\n      this._query.add(first, second);\n      return this;\n    };\n\n    URI.prototype.clone = function() {\n      return URI(this.toObject());\n    };\n\n    URI.prototype.toObject = function() {\n      return {\n        scheme: this.getScheme(),\n        authority: this.getAuthority(),\n        path: this.getPath(),\n        query: this.getQuery(),\n        fragment: this.getFragment()\n      };\n    };\n\n    URI.prototype.toString = function() {\n      var query_string, result;\n      result = '';\n      if (this.scheme) {\n        result += this.scheme + ':';\n      }\n      if (this.authority) {\n        result += '//' + URI.encode(this.authority, ':@[]');\n      }\n      if (this.path) {\n        assert(!this.authority || !this.path.length || this.path[0] === '/', 'Path must start with a \"/\" if URI is not relative');\n        result += URI.encode(this.path, '/');\n      }\n      query_string = this._query.toString();\n      if (query_string) {\n        result += '?' + query_string;\n      }\n      if (this.fragment) {\n        result += '#' + URI.encode(this.fragment, ':@[]/&=+?#!');\n      }\n      return result;\n    };\n\n    URI.REGEXP = /^(?:([^:/\\\\?#]+):)?(?:[/\\\\]{2}([^/\\\\?#]*))?([^?#]*)(?:\\?([^#]*))?(?:[#](.*))?$/;\n\n    URI.SCHEME_REGEXP = /^[a-zA-Z][a-zA-Z0-9+.\\-]*$/;\n\n    URI.decode = function(value) {\n      if (!value) {\n        return '';\n      }\n      return decodeURIComponent(value);\n    };\n\n    URI.encode = function(value, safe) {\n      var escaped, safe_char, _i, _len;\n      if (safe == null) {\n        safe = '';\n      }\n      if (!value) {\n        return '';\n      }\n      value = encodeURIComponent(value);\n      safe += '~';\n      for (_i = 0, _len = safe.length; _i < _len; _i++) {\n        safe_char = safe[_i];\n        escaped = encodeURIComponent(safe_char);\n        value = value.replace(new RegExp(escaped, 'g'), safe_char);\n      }\n      return value;\n    };\n\n    return URI;\n\n  })();\n  QueryComponent = (function() {\n    function QueryComponent(params) {\n      this.dict = {};\n      this.add(params);\n    }\n\n    QueryComponent.parse_string = function(query_string) {\n      var k, param, param_dict, params, parts, v, _i, _len;\n      if (!query_string) {\n        return null;\n      }\n      param_dict = {};\n      params = query_string.split('&');\n      for (_i = 0, _len = params.length; _i < _len; _i++) {\n        param = params[_i];\n        if (param !== '') {\n          parts = param.split('=');\n          k = QueryComponent.decode(parts[0]);\n          v = QueryComponent.decode(parts.slice(1).join('='));\n          if (k in param_dict) {\n            if (!Array.isArray(param_dict[k])) {\n              param_dict[k] = [param_dict[k]];\n            }\n            param_dict[k].push(v);\n          } else {\n            param_dict[k] = v;\n          }\n        }\n      }\n      return param_dict;\n    };\n\n    QueryComponent.prototype.add = function(first, second) {\n      var elm, k, params, v;\n      if (second == null) {\n        second = null;\n      }\n      if (typeof first === 'string') {\n        if (second != null) {\n          if (Array.isArray(second)) {\n            this.dict[first] = (function() {\n              var _i, _len, _results;\n              _results = [];\n              for (_i = 0, _len = second.length; _i < _len; _i++) {\n                elm = second[_i];\n                _results.push(String(elm));\n              }\n              return _results;\n            })();\n          } else {\n            this.dict[first] = String(second);\n          }\n        }\n      } else {\n        params = first || {};\n        for (k in params) {\n          v = params[k];\n          if (v != null) {\n            if (Array.isArray(v)) {\n              this.dict[k] = (function() {\n                var _i, _len, _results;\n                _results = [];\n                for (_i = 0, _len = v.length; _i < _len; _i++) {\n                  elm = v[_i];\n                  _results.push(String(elm));\n                }\n                return _results;\n              })();\n            } else {\n              this.dict[k] = String(v);\n            }\n          }\n        }\n      }\n      return this;\n    };\n\n    QueryComponent.prototype.replace = function(query) {\n      this.dict = query || {};\n      return this;\n    };\n\n    QueryComponent.prototype.toString = function() {\n      var k, result, v, _ref;\n      result = [];\n      _ref = this.dict;\n      for (k in _ref) {\n        v = _ref[k];\n        if (Array.isArray(v)) {\n          v.forEach(function(v_elm) {\n            return result.push(QueryComponent.encode(k) + '=' + QueryComponent.encode(v_elm));\n          });\n        } else {\n          result.push(QueryComponent.encode(k) + '=' + QueryComponent.encode(v));\n        }\n      }\n      if (!result.length) {\n        return '';\n      }\n      return result.join('&');\n    };\n\n    QueryComponent.decode = function(value) {\n      if (value === null) {\n        return '';\n      }\n      return URI.decode(value.replace(/\\+/g, '%20'));\n    };\n\n    QueryComponent.encode = function(value) {\n      if (value === null) {\n        return '';\n      }\n      return URI.encode(value).replace(/%20/g, '+');\n    };\n\n    return QueryComponent;\n\n  })();\n  window.URI = URI;\n  return URI;\n});\n\n//# sourceMappingURL=uri.map\n;\n",
    "// Generated by CoffeeScript 1.7.1\nvar __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\ndefine('modules/core/browser',['modules/core/exception', 'modules/core/uri'], function(exception, uri) {\n  var Browser, browser_info, domainWhitelist, extract_browser_info_from_user_agent;\n  extract_browser_info_from_user_agent = function(ua) {\n    var match;\n    ua = ua.toLowerCase();\n    match = /(ipad)/.exec(ua) || /(chrome)[ \\/]([\\w.]+)/.exec(ua) || /(webkit)[ \\/]([\\w.]+)/.exec(ua) || /(opera)(?:.*version|)[ \\/]([\\w.]+)/.exec(ua) || /(msie) ([\\w.]+)/.exec(ua) || /(trident).*? rv:([\\w.]+)/.exec(ua) || ua.indexOf(\"compatible\") < 0 && /(mozilla)(?:.*? rv:([\\w.]+)|)/.exec(ua) || [];\n    return {\n      browser: match[1] || \"\",\n      version: match[2] || \"0\"\n    };\n  };\n  browser_info = extract_browser_info_from_user_agent(navigator.userAgent);\n  if (browser_info.browser === 'trident') {\n    browser_info.browser = 'msie';\n  }\n  domainWhitelist = typeof Constants !== \"undefined\" && Constants !== null ? [Constants.WEBSERVER, Constants.BLOCK_CLUSTER] : [];\n  Browser = {\n    version: browser_info.version,\n    msie_version_at_most: function(v) {\n      return Browser.msie && parseInt(Browser.version, 10) <= v;\n    },\n    get_uri: function(target_window) {\n      if (target_window == null) {\n        target_window = window;\n      }\n      return URI.parse(this.get_href(target_window));\n    },\n    get_href: function(target_window) {\n      if (target_window == null) {\n        target_window = window;\n      }\n      return target_window.location.href;\n    },\n    _parse_target: function(target_href, target_window) {\n      var hostname, parsedTarget, parser, pathname, protocol, _ref;\n      if (target_window == null) {\n        target_window = window;\n      }\n      parser = target_window.document.createElement('a');\n      parser.href = target_href;\n      if (parser.protocol === \":\") {\n        protocol = target_window.location.protocol;\n      } else {\n        protocol = parser.protocol || target_window.location.protocol;\n      }\n      hostname = parser.hostname || target_window.location.hostname;\n      pathname = parser.pathname.indexOf('/') === 0 ? parser.pathname : '/' + parser.pathname;\n      target_href = protocol + \"//\" + hostname + pathname + parser.search + parser.hash;\n      parsedTarget = uri.parse(String(target_href));\n      exception.assert((_ref = parsedTarget.authority, __indexOf.call(domainWhitelist, _ref) >= 0) && parsedTarget.scheme === 'https', \"Target URI must be secure and in domain whitelist\");\n      return parsedTarget;\n    },\n    redirect: function(target_href, target_window) {\n      var parsedTarget;\n      if (target_window == null) {\n        target_window = window;\n      }\n      parsedTarget = this._parse_target(target_href, target_window);\n      return target_window.location.href = parsedTarget.toString();\n    },\n    replace_location: function(target_href) {\n      var parsedTarget;\n      parsedTarget = this._parse_target(target_href);\n      return window.location.replace(parsedTarget.toString());\n    },\n    reload: function() {\n      return window.location.reload();\n    },\n    unsafeRedirect: function(target_href) {\n      return window.location.href = target_href;\n    }\n  };\n  Browser[browser_info.browser] = true;\n  if (Browser.ipad) {\n    Browser.webkit = true;\n    Browser.safari = true;\n  } else if (Browser.chrome) {\n    Browser.webkit = true;\n  } else if (Browser.webkit) {\n    Browser.safari = true;\n  }\n  window.Browser = Browser;\n  return Browser;\n});\n\n//# sourceMappingURL=browser.map\n;\n",
    "// Generated by CoffeeScript 1.7.1\ndefine('modules/core/instantiate',['modules/core/exception'], function(exception) {\n  var construct, instantiate;\n  construct = function(constructor, args) {\n    var F;\n    assert(constructor);\n    F = function() {\n      return constructor.apply(this, args);\n    };\n    F.prototype = constructor.prototype;\n    return new F();\n  };\n  instantiate = {\n    construct: construct\n  };\n  return instantiate;\n});\n\n//# sourceMappingURL=instantiate.map\n;\n",
    "// Generated by CoffeeScript 1.7.1\ndefine('modules/core/controller_registry',['jquery', 'modules/core/instantiate', 'modules/core/exception'], function($j, instantiate, jsexception) {\n  var ControllerRegistry, attach_controller, construct;\n  construct = instantiate.construct;\n  attach_controller = function($element, constructor, args) {\n    var constructor_args, elt, _i, _len;\n    constructor_args = [$element].concat(args);\n    for (_i = 0, _len = $element.length; _i < _len; _i++) {\n      elt = $element[_i];\n      $j(elt).data('jscontroller', construct(constructor, constructor_args));\n    }\n    return $element;\n  };\n  ControllerRegistry = (function() {\n    function ControllerRegistry() {}\n\n    ControllerRegistry.controllers = {};\n\n    ControllerRegistry.register_controller = function(pyxl_id, constructor, args) {\n      this.controllers[pyxl_id] = {\n        constructor: constructor,\n        args: args\n      };\n      return this.find_and_bind_controller(pyxl_id);\n    };\n\n    ControllerRegistry.bind_controller = function($element) {\n      var component_id, data;\n      component_id = $element.data('js-component-id');\n      assert(this.controllers[component_id], \"No controller for \" + component_id);\n      data = this.controllers[component_id];\n      return attach_controller($element, data.constructor, data.args);\n    };\n\n    ControllerRegistry.find_and_bind_controller = function(component_id) {\n      var $element, data;\n      assert(this.controllers[component_id], \"No controller for \" + component_id);\n      data = this.controllers[component_id];\n      $element = $j(\"[data-js-component-id='\" + component_id + \"']\");\n      return attach_controller($element, data.constructor, data.args);\n    };\n\n    return ControllerRegistry;\n\n  })();\n  return ControllerRegistry;\n});\n\n//# sourceMappingURL=controller_registry.map\n;\n",
    "// Generated by CoffeeScript 1.7.1\ndefine('modules/core/cookies',[], function() {\n  var Cookies;\n  Cookies = {\n    create: function(name, value, days) {\n      var date, expires;\n      expires = \"\";\n      if (days) {\n        date = new Date();\n        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\n        expires = \"; expires=\" + (date.toGMTString());\n      }\n      return document.cookie = \"\" + name + \"=\" + value + expires + \"; path=/\";\n    },\n    read: function(name) {\n      var c, nameEQ, _i, _len, _ref;\n      nameEQ = \"\" + name + \"=\";\n      _ref = document.cookie.split(\";\");\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        c = _ref[_i];\n        while (c.charAt(0) === \" \") {\n          c = c.substring(1, c.length);\n        }\n        if (c.indexOf(nameEQ) === 0) {\n          return c.substring(nameEQ.length, c.length);\n        }\n      }\n      return null;\n    },\n    \"delete\": function(name) {\n      return this.create(name, \"\", -1);\n    },\n    are_enabled: function() {\n      if (navigator.cookieEnabled != null) {\n        return navigator.cookieEnabled;\n      }\n      document.cookie = \"this_is_a_test_cookie\";\n      return document.cookie.indexOf(\"this_is_a_test_cookie\") !== -1;\n    }\n  };\n  window.Cookies = Cookies;\n  return Cookies;\n});\n\n//# sourceMappingURL=cookies.map\n;\n",
    "// Generated by CoffeeScript 1.7.1\ndefine('modules/core/dom',['jquery', 'modules/core/controller_registry', 'modules/core/exception'], function($j, ControllerRegistry, jsexception) {\n  var bind_controllers, clone, clone_position, controller, document_height, dom, focus_in_input, is_element, scroll_clear_cache, scroll_lock_document, scroll_lock_document_count, scroll_offsets, scroll_to, scroll_unlock_document, set_controller, viewport_dimensions, viewport_offset, _cached_scroll_offsets, _cached_viewport_dimensions, _is_page_scrollable, _resize_listener, _scroll_listener;\n  bind_controllers = function($element) {\n    var child, _i, _len, _ref;\n    _ref = $element.children();\n    for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n      child = _ref[_i];\n      bind_controllers($j(child));\n    }\n    if (!controller($element) && $element.data('js-component-id')) {\n      return ControllerRegistry.bind_controller($element);\n    }\n  };\n  clone = function($element) {\n    var $cloned;\n    assert($element, \"Trying to clone nonexistent element\");\n    $cloned = $element.clone();\n    bind_controllers($cloned);\n    return $cloned;\n  };\n  controller = function($element) {\n    return $element.data('jscontroller');\n  };\n  set_controller = function($element, controller_object) {\n    return $element.data('jscontroller', controller_object);\n  };\n  is_element = function(element) {\n    if (!element) {\n      return false;\n    } else if (element.nodeType === 1) {\n      return true;\n    } else if (element.length >= 1 && element[0].nodeType === 1) {\n      return true;\n    } else {\n      return false;\n    }\n  };\n  focus_in_input = function() {\n    var _ref, _ref1, _ref2, _ref3, _ref4;\n    return (((_ref = (_ref1 = document.activeElement) != null ? _ref1.tagName : void 0) === \"INPUT\" || _ref === \"TEXTAREA\" || _ref === \"SELECT\") && ((_ref2 = (_ref3 = document.activeElement) != null ? _ref3.type : void 0) !== \"submit\" && _ref2 !== \"button\")) || ((_ref4 = document.activeElement) != null ? _ref4.getAttribute(\"contentEditable\") : void 0);\n  };\n  viewport_offset = function(element) {\n    var $element, $window_element, offset;\n    $element = $j(element);\n    offset = $element.offset();\n    $window_element = $j(window);\n    return {\n      left: offset.left - $window_element.scrollLeft(),\n      top: offset.top - $window_element.scrollTop()\n    };\n  };\n  _cached_viewport_dimensions = null;\n  _resize_listener = null;\n  viewport_dimensions = function() {\n    if (!_cached_viewport_dimensions) {\n      _cached_viewport_dimensions = {\n        height: $j(window).height(),\n        width: $j(window).width()\n      };\n    }\n    if (!_resize_listener) {\n      _resize_listener = $j(window).on('resize', function() {\n        return _cached_viewport_dimensions = null;\n      });\n    }\n    return _cached_viewport_dimensions;\n  };\n  document_height = function() {\n    return Math.max($j(document).height(), $j(window).height(), document.documentElement.clientHeight);\n  };\n  _scroll_listener = null;\n  _cached_scroll_offsets = null;\n  scroll_offsets = function() {\n    var $html, scroll_left, scroll_top;\n    if (!_scroll_listener) {\n      _scroll_listener = $j(window).scroll(function() {\n        return _cached_scroll_offsets = null;\n      });\n    }\n    if (_is_page_scrollable()) {\n      if (!_cached_scroll_offsets) {\n        scroll_top = $j(window).scrollTop();\n        scroll_left = $j(window).scrollLeft();\n        _cached_scroll_offsets = {\n          0: scroll_left,\n          1: scroll_top,\n          left: scroll_left,\n          top: scroll_top\n        };\n      }\n    } else {\n      $html = $j(document.documentElement);\n      scroll_top = -1 * parseInt($html.css('top'), 10);\n      scroll_left = -1 * parseInt($html.css('left'), 10);\n      _cached_scroll_offsets = {\n        0: scroll_left,\n        1: scroll_top,\n        left: scroll_left,\n        top: scroll_top\n      };\n    }\n    return _cached_scroll_offsets;\n  };\n  scroll_clear_cache = function() {\n    return _cached_scroll_offsets = null;\n  };\n  _is_page_scrollable = function() {\n    return !$j(document.documentElement).hasClass('no-scroll');\n  };\n  scroll_lock_document_count = 0;\n  scroll_lock_document = function() {\n    var $html, left, top, _scroll_offsets;\n    scroll_lock_document_count++;\n    $html = $j(document.documentElement);\n    if (!$html.hasClass('no-scroll')) {\n      _scroll_offsets = scroll_offsets();\n      top = (-1 * _scroll_offsets['top']) + 'px';\n      left = (-1 * _scroll_offsets['left']) + 'px';\n      $html.css({\n        top: top,\n        left: left\n      });\n      return $html.addClass('no-scroll');\n    }\n  };\n  scroll_unlock_document = function() {\n    var $html, scroll_left, scroll_top;\n    if (scroll_lock_document_count > 0) {\n      scroll_lock_document_count--;\n    }\n    $html = $j(document.documentElement);\n    if (scroll_lock_document_count === 0 && $html.hasClass('no-scroll')) {\n      scroll_top = -1 * parseInt($html.css('top'), 10);\n      scroll_left = -1 * parseInt($html.css('left'), 10);\n      $html.css({\n        top: '',\n        left: ''\n      });\n      $html.removeClass('no-scroll');\n      scroll_to(scroll_left, scroll_top + 1);\n      scroll_to(scroll_left, scroll_top - 1);\n      return scroll_to(scroll_left, scroll_top);\n    }\n  };\n  scroll_to = function(x, y) {\n    x = Math.max(x, 0);\n    y = Math.max(y, 0);\n    if (y > scroll_offsets().top) {\n      y = Math.min(y, document_height() - dom.viewport_dimensions().height);\n    }\n    window.scrollTo(x, y);\n    return _cached_scroll_offsets = {\n      0: x,\n      1: y,\n      left: x,\n      top: y\n    };\n  };\n  clone_position = function(target, source, options) {\n    var $parent, $source, $target, a, b, defaults, delta, source_position;\n    $source = $j(source);\n    $target = $j(target);\n    defaults = {\n      setLeft: true,\n      setTop: true,\n      setWidth: true,\n      setHeight: true,\n      offsetTop: 0,\n      offsetLeft: 0\n    };\n    options = $j.extend({}, defaults, options);\n    source_position = viewport_offset($source);\n    delta = {\n      top: 0,\n      left: 0\n    };\n    $parent = null;\n    if ($target.css('position') === 'absolute') {\n      $parent = $target.offsetParent();\n      delta = viewport_offset($parent);\n    }\n    if ($parent && $parent[0] === document.body) {\n      delta.left -= document.body.offsetLeft;\n      delta.top -= document.body.offsetTop;\n    }\n    if (options.setLeft) {\n      a = (source_position.left - delta.left + options.offsetLeft) + 'px';\n      $target.css('left', a);\n    }\n    if (options.setTop) {\n      b = (source_position.top - delta.top + options.offsetTop) + 'px';\n      $target.css('top', b);\n    }\n    if (options.setWidth) {\n      $target.width($source[0].offsetWidth);\n    }\n    if (options.setHeight) {\n      $target.height($source[0].offsetHeight);\n    }\n    return $target;\n  };\n  viewport_offset = function(element) {\n    var $element, $window_element, offset;\n    $element = $j(element);\n    offset = $element.offset();\n    $window_element = $j(window);\n    return {\n      left: offset.left - $window_element.scrollLeft(),\n      top: offset.top - $window_element.scrollTop()\n    };\n  };\n  dom = {\n    bind_controllers: bind_controllers,\n    clone: clone,\n    clone_position: clone_position,\n    controller: controller,\n    focus_in_input: focus_in_input,\n    scroll_clear_cache: scroll_clear_cache,\n    scroll_lock_document: scroll_lock_document,\n    scroll_offsets: scroll_offsets,\n    scroll_to: scroll_to,\n    scroll_unlock_document: scroll_unlock_document,\n    set_controller: set_controller,\n    is_element: is_element,\n    viewport_offset: viewport_offset,\n    viewport_dimensions: viewport_dimensions\n  };\n  window.dom = dom;\n  return dom;\n});\n\n//# sourceMappingURL=dom.map\n;\n",
    "// Generated by CoffeeScript 1.7.1\ndefine('modules/core/html',[], function() {\n  var HTML;\n  HTML = (function() {\n    function HTML(str) {\n      this._str_DONT_TOUCH = str;\n    }\n\n    HTML.prototype.toHTML = function() {\n      return this._str_DONT_TOUCH;\n    };\n\n    HTML.prototype.toString = function() {\n      return \"[object HTML]\";\n    };\n\n    return HTML;\n\n  })();\n  (function() {\n    var disallowed_char_regex, escape, escaper, _raw_escape;\n    HTML.tmpl = function(str, data) {\n      var fn;\n      if (!/[^\\w:.-]/.test(str)) {\n        str = document.getElementById(str).innerHTML;\n      }\n      fn = new Function(\"obj\", \"var p=[],print=function(){p.push.apply(p,arguments);};\" + \"with(obj){p.push('\" + str.replace(/[\\r\\t\\n]/g, \" \").replace(/'(?=[^%]*%>)/g, \"\\t\").split(\"'\").join(\"\\\\'\").split(\"\\t\").join(\"'\").replace(/<%=(.*?)%>/g, \"',HTML._raw_escape($1),'\").split(\"<%\").join(\"');\").split(\"%>\").join(\"p.push('\") + \"');}return new HTML(jQuery.trim(p.join('')));\");\n      if (data) {\n        return fn(data);\n      } else {\n        return fn;\n      }\n    };\n    disallowed_char_regex = /[^\\w@\\.\\ \\-\\(\\)\\,\\$~%#\\[\\]\\{\\}\\!\\^]/g;\n    escaper = function(s) {\n      return \"&#\" + s.charCodeAt(0) + \";\";\n    };\n    escape = function(str) {\n      return (\"\" + str).replace(disallowed_char_regex, escaper);\n    };\n    HTML.escape = function(str) {\n      if (str instanceof HTML) {\n        return str;\n      } else {\n        return new HTML(escape(str));\n      }\n    };\n    return HTML._raw_escape = _raw_escape = function(str) {\n      if (str instanceof HTML) {\n        return str.toHTML();\n      } else if (typeof str === \"number\") {\n        return str;\n      } else {\n        return escape(str);\n      }\n    };\n  })();\n  window.HTML = HTML;\n  return HTML;\n});\n\n//# sourceMappingURL=html.map\n;\n",
    "// Generated by CoffeeScript 1.7.1\nvar __slice = [].slice;\n\ndefine('modules/core/kwargs',[], function() {\n  var PyKeywordArguments;\n  PyKeywordArguments = function() {\n    var args, haveKwargDict, i, key, returned, signature, tuple, value, _i, _ref, _ref1;\n    signature = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n    returned = {};\n    signature = (function() {\n      var _i, _len, _results;\n      _results = [];\n      for (_i = 0, _len = signature.length; _i < _len; _i++) {\n        tuple = signature[_i];\n        _results.push(typeof tuple === 'string' ? {\n          'name': tuple,\n          'default': void 0\n        } : {\n          'name': tuple[0],\n          'default': tuple[1]\n        });\n      }\n      return _results;\n    })();\n    haveKwargDict = function() {\n      var i, key, signature_fields, value, _i, _ref, _ref1, _ref2;\n      if (!((args != null) && typeof args[args.length - 1] === 'object')) {\n        return false;\n      }\n      signature_fields = {};\n      for (i = _i = _ref = args.length - 1, _ref1 = signature.length - 1; _i <= _ref1; i = _i += 1) {\n        signature_fields[signature[i].name] = true;\n      }\n      _ref2 = args[args.length - 1];\n      for (key in _ref2) {\n        value = _ref2[key];\n        if (!(key in signature_fields)) {\n          return false;\n        }\n      }\n      return true;\n    };\n    if (haveKwargDict()) {\n      _ref = args[args.length - 1];\n      for (key in _ref) {\n        value = _ref[key];\n        returned[key] = value;\n      }\n      args.pop();\n    }\n    for (i = _i = 0, _ref1 = signature.length - 1; _i <= _ref1; i = _i += 1) {\n      if (i < args.length) {\n        returned[signature[i].name] = args[i];\n      } else {\n        if (!(signature[i].name in returned)) {\n          returned[signature[i].name] = signature[i][\"default\"];\n        }\n      }\n    }\n    return returned;\n  };\n  return PyKeywordArguments;\n});\n\n//# sourceMappingURL=kwargs.map\n;\n",
    "(function() {/*\n A JavaScript implementation of the SHA family of hashes, as defined in FIPS\n PUB 180-2 as well as the corresponding HMAC implementation as defined in\n FIPS PUB 198a\n\n Copyright Brian Turek 2008-2012\n Distributed under the BSD License\n See http://caligatio.github.com/jsSHA/ for more information\n\n Several functions taken from Paul Johnson\n*/\nfunction k(a){throw a;}function s(a,e){var b=[],f=(1<<e)-1,c=a.length*e,d;for(d=0;d<c;d+=e)b[d>>>5]|=(a.charCodeAt(d/e)&f)<<32-e-d%32;return{value:b,binLen:c}}function u(a){var e=[],b=a.length,f,c;0!==b%2&&k(\"String of HEX type must be in byte increments\");for(f=0;f<b;f+=2)c=parseInt(a.substr(f,2),16),isNaN(c)&&k(\"String of HEX type contains invalid characters\"),e[f>>>3]|=c<<24-4*(f%8);return{value:e,binLen:4*b}}\nfunction v(a){var e=[],b=0,f,c,d,g,h;-1===a.search(/^[a-zA-Z0-9=+\\/]+$/)&&k(\"Invalid character in base-64 string\");f=a.indexOf(\"=\");a=a.replace(/\\=/g,\"\");-1!==f&&f<a.length&&k(\"Invalid '=' found in base-64 string\");for(c=0;c<a.length;c+=4){h=a.substr(c,4);for(d=g=0;d<h.length;d+=1)f=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\".indexOf(h[d]),g|=f<<18-6*d;for(d=0;d<h.length-1;d+=1)e[b>>2]|=(g>>>16-8*d&255)<<24-8*(b%4),b+=1}return{value:e,binLen:8*b}}\nfunction w(a,e){var b=\"\",f=4*a.length,c,d;for(c=0;c<f;c+=1)d=a[c>>>2]>>>8*(3-c%4),b+=\"0123456789abcdef\".charAt(d>>>4&15)+\"0123456789abcdef\".charAt(d&15);return e.outputUpper?b.toUpperCase():b}\nfunction x(a,e){var b=\"\",f=4*a.length,c,d,g;for(c=0;c<f;c+=3){g=(a[c>>>2]>>>8*(3-c%4)&255)<<16|(a[c+1>>>2]>>>8*(3-(c+1)%4)&255)<<8|a[c+2>>>2]>>>8*(3-(c+2)%4)&255;for(d=0;4>d;d+=1)b=8*c+6*d<=32*a.length?b+\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\".charAt(g>>>6*(3-d)&63):b+e.b64Pad}return b}\nfunction y(a){var e={outputUpper:!1,b64Pad:\"=\"};try{a.hasOwnProperty(\"outputUpper\")&&(e.outputUpper=a.outputUpper),a.hasOwnProperty(\"b64Pad\")&&(e.b64Pad=a.b64Pad)}catch(b){}\"boolean\"!==typeof e.outputUpper&&k(\"Invalid outputUpper formatting option\");\"string\"!==typeof e.b64Pad&&k(\"Invalid b64Pad formatting option\");return e}function z(a,e){var b=(a&65535)+(e&65535);return((a>>>16)+(e>>>16)+(b>>>16)&65535)<<16|b&65535}\nfunction A(a,e,b,f,c){var d=(a&65535)+(e&65535)+(b&65535)+(f&65535)+(c&65535);return((a>>>16)+(e>>>16)+(b>>>16)+(f>>>16)+(c>>>16)+(d>>>16)&65535)<<16|d&65535}\nfunction B(a,e){var b=[],f,c,d,g,h,C,t,j,D,l=[1732584193,4023233417,2562383102,271733878,3285377520],n=[1518500249,1518500249,1518500249,1518500249,1518500249,1518500249,1518500249,1518500249,1518500249,1518500249,1518500249,1518500249,1518500249,1518500249,1518500249,1518500249,1518500249,1518500249,1518500249,1518500249,1859775393,1859775393,1859775393,1859775393,1859775393,1859775393,1859775393,1859775393,1859775393,1859775393,1859775393,1859775393,1859775393,1859775393,1859775393,1859775393,1859775393,\n1859775393,1859775393,1859775393,2400959708,2400959708,2400959708,2400959708,2400959708,2400959708,2400959708,2400959708,2400959708,2400959708,2400959708,2400959708,2400959708,2400959708,2400959708,2400959708,2400959708,2400959708,2400959708,2400959708,3395469782,3395469782,3395469782,3395469782,3395469782,3395469782,3395469782,3395469782,3395469782,3395469782,3395469782,3395469782,3395469782,3395469782,3395469782,3395469782,3395469782,3395469782,3395469782,3395469782];a[e>>>5]|=128<<24-e%32;a[(e+\n65>>>9<<4)+15]=e;D=a.length;for(t=0;t<D;t+=16){f=l[0];c=l[1];d=l[2];g=l[3];h=l[4];for(j=0;80>j;j+=1)b[j]=16>j?a[j+t]:(b[j-3]^b[j-8]^b[j-14]^b[j-16])<<1|(b[j-3]^b[j-8]^b[j-14]^b[j-16])>>>31,C=20>j?A(f<<5|f>>>27,c&d^~c&g,h,n[j],b[j]):40>j?A(f<<5|f>>>27,c^d^g,h,n[j],b[j]):60>j?A(f<<5|f>>>27,c&d^c&g^d&g,h,n[j],b[j]):A(f<<5|f>>>27,c^d^g,h,n[j],b[j]),h=g,g=d,d=c<<30|c>>>2,c=f,f=C;l[0]=z(f,l[0]);l[1]=z(c,l[1]);l[2]=z(d,l[2]);l[3]=z(g,l[3]);l[4]=z(h,l[4])}return l}\nwindow.jsSHA=function(a,e,b){var f=null,c=0,d=[0],g=0,h=null,g=\"undefined\"!==typeof b?b:8;8===g||16===g||k(\"charSize must be 8 or 16\");\"HEX\"===e?(0!==a.length%2&&k(\"srcString of HEX type must be in byte increments\"),h=u(a),c=h.binLen,d=h.value):\"ASCII\"===e||\"TEXT\"===e?(h=s(a,g),c=h.binLen,d=h.value):\"B64\"===e?(h=v(a),c=h.binLen,d=h.value):k(\"inputFormat must be HEX, TEXT, ASCII, or B64\");this.getHash=function(b,a,e){var g=null,h=d.slice(),n=\"\";switch(a){case \"HEX\":g=w;break;case \"B64\":g=x;break;default:k(\"format must be HEX or B64\")}\"SHA-1\"===\nb?(null===f&&(f=B(h,c)),n=g(f,y(e))):k(\"Chosen SHA variant is not supported\");return n};this.getHMAC=function(b,a,e,f,h){var n,p,m,E,r,F,G=[],H=[],q=null;switch(f){case \"HEX\":n=w;break;case \"B64\":n=x;break;default:k(\"outputFormat must be HEX or B64\")}\"SHA-1\"===e?(m=64,F=160):k(\"Chosen SHA variant is not supported\");\"HEX\"===a?(q=u(b),r=q.binLen,p=q.value):\"ASCII\"===a||\"TEXT\"===a?(q=s(b,g),r=q.binLen,p=q.value):\"B64\"===a?(q=v(b),r=q.binLen,p=q.value):k(\"inputFormat must be HEX, TEXT, ASCII, or B64\");\nb=8*m;a=m/4-1;m<r/8?(\"SHA-1\"===e?p=B(p,r):k(\"Unexpected error in HMAC implementation\"),p[a]&=4294967040):m>r/8&&(p[a]&=4294967040);for(m=0;m<=a;m+=1)G[m]=p[m]^909522486,H[m]=p[m]^1549556828;\"SHA-1\"===e?E=B(H.concat(B(G.concat(d),b+c)),b+F):k(\"Unexpected error in HMAC implementation\");return n(E,y(h))}};})();\n\ndefine(\"external/sha1\", function(){});\n\n",
    "// Generated by CoffeeScript 1.7.1\nvar __slice = [].slice;\n\ndefine('modules/core/i18n',['modules/core/kwargs', 'modules/core/exception', 'external/sha1'], function(PyKeywordArguments, JSException, jssha) {\n  var ACCENT_MAP, I18n, I18nProjects, LOWER, LOWER_ACCENT, NoOpTranslated, STUB_BIND, STUB_IS_ARRAY, UPPER, UPPER_ACCENT, i, _i;\n  LOWER = 'abcdefghijklmnopqrstuvwxyz';\n  LOWER_ACCENT = '\\xe2\\u1e03\\u0107\\u1e0b\\xe8\\u1e1f\\u011d\\u1e2b\\xed\\u0135\\u01e9' + '\\u013a\\u1e41\\u0144\\u014f\\u1e57\\u024b\\u0155\\u015b\\u1e6d\\u016f' + '\\u1e7f\\u1e98\\u1e8b\\u1e8f\\u1e93';\n  UPPER = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\";\n  UPPER_ACCENT = '\\u1e00\\u1e02\\u1e08\\u1e0a\\u1e14\\u1e1e\\u1e20\\u1e22\\u1e2c\\u0134' + '\\u1e34\\u013b\\u1e3e\\u014a\\xd5\\u1e54\\u024a\\u0154\\u1e60\\u1e6e\\u0168' + '\\u1e7c\\u1e84\\u1e8c\\u0178\\u01b5';\n  ACCENT_MAP = {};\n  for (i = _i = 0; _i < 26; i = ++_i) {\n    ACCENT_MAP[LOWER.charAt(i)] = LOWER_ACCENT.charAt(i);\n    ACCENT_MAP[UPPER.charAt(i)] = UPPER_ACCENT.charAt(i);\n  }\n  I18n = (function() {\n    function I18n() {}\n\n    I18n.messages = {};\n\n    I18n.emessages = {};\n\n    I18n.RAND = 0;\n\n    I18n.NUM_MISSED = 0;\n\n    I18n.add_i18n_message = function(id, msg_display, english_display, clear_msg) {\n      msg_display = msg_display.strip_tags().friendly_format();\n      english_display = english_display.strip_tags();\n      this.messages[msg_display] = id;\n      this.emessages[msg_display] = english_display;\n      if (clear_msg) {\n        delete this.messages[clear_msg];\n        return delete this.emessages[clear_msg];\n      }\n    };\n\n    I18n.PLURAL_RULES = {\n      SINGULAR_1: function(n) {\n        if (n === 1) {\n          return 0;\n        } else {\n          return 1;\n        }\n      },\n      SINGULAR_01: function(n) {\n        if (n <= 1) {\n          return 0;\n        } else {\n          return 1;\n        }\n      },\n      SINGULAR_ALL: function(n) {\n        return 0;\n      },\n      RUSSIA_UKRAINE: function(n) {\n        if (n % 10 === 1 && n % 100 !== 11) {\n          return 0;\n        } else if (n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20)) {\n          return 1;\n        } else {\n          return 2;\n        }\n      },\n      POLAND: function(n) {\n        if (n === 1) {\n          return 0;\n        } else if (n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20)) {\n          return 1;\n        } else {\n          return 2;\n        }\n      }\n    };\n\n    I18n.PLURAL_RULES_BY_LOCALE = {\n      en: I18n.PLURAL_RULES.SINGULAR_1,\n      en_GB: I18n.PLURAL_RULES.SINGULAR_1,\n      da_DK: I18n.PLURAL_RULES.SINGULAR_1,\n      de: I18n.PLURAL_RULES.SINGULAR_1,\n      es_ES: I18n.PLURAL_RULES.SINGULAR_1,\n      es: I18n.PLURAL_RULES.SINGULAR_1,\n      fr: I18n.PLURAL_RULES.SINGULAR_01,\n      id: I18n.PLURAL_RULES.SINGULAR_ALL,\n      it: I18n.PLURAL_RULES.SINGULAR_1,\n      ja: I18n.PLURAL_RULES.SINGULAR_ALL,\n      ko: I18n.PLURAL_RULES.SINGULAR_ALL,\n      ms: I18n.PLURAL_RULES.SINGULAR_ALL,\n      nb_NO: I18n.PLURAL_RULES.SINGULAR_1,\n      nl_NL: I18n.PLURAL_RULES.SINGULAR_1,\n      pl: I18n.PLURAL_RULES.POLAND,\n      pt_BR: I18n.PLURAL_RULES.SINGULAR_01,\n      ru: I18n.PLURAL_RULES.RUSSIA_UKRAINE,\n      sv_SE: I18n.PLURAL_RULES.SINGULAR_1,\n      th_TH: I18n.PLURAL_RULES.SINGULAR_ALL,\n      tr: I18n.PLURAL_RULES.SINGULAR_ALL,\n      uk_UA: I18n.PLURAL_RULES.RUSSIA_UKRAINE,\n      xx_AC: I18n.PLURAL_RULES.SINGULAR_1,\n      xx_LS: I18n.PLURAL_RULES.SINGULAR_1,\n      xx_HA: I18n.PLURAL_RULES.SINGULAR_1,\n      xx_RL: I18n.PLURAL_RULES.SINGULAR_1,\n      xx_AE: I18n.PLURAL_RULES.SINGULAR_1,\n      zh_CN: I18n.PLURAL_RULES.SINGULAR_ALL,\n      zh_TW: I18n.PLURAL_RULES.SINGULAR_ALL\n    };\n\n    I18n.get_langpack = function() {\n      if (!window.LANGPACK) {\n        window.LANGPACK = {};\n      }\n      return window.LANGPACK;\n    };\n\n    I18n._ = function() {\n      var args, comment, langpack, lookup, project, r, s, string_key, _ref;\n      s = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n      _ref = PyKeywordArguments.apply(null, [[['project', 'web'], 'comment']].concat(__slice.call(args))), project = _ref.project, comment = _ref.comment;\n      if ((typeof Constants !== \"undefined\" && Constants !== null ? Constants.USER_LOCALE : void 0) && I18n.locale_is_fake(Constants.USER_LOCALE)) {\n        r = I18n.fake_translate(s, typeof Constants !== \"undefined\" && Constants !== null ? Constants.USER_LOCALE : void 0);\n      } else {\n        string_key = I18nProjects.get_string_key(s, project, comment);\n        langpack = I18n.get_langpack();\n        lookup = langpack[string_key] || langpack[s];\n        if (lookup) {\n          if (lookup instanceof String || typeof lookup === \"string\") {\n            r = lookup;\n          } else {\n            r = lookup[0] || s;\n          }\n        } else {\n          if (I18n.RAND === 0 && (typeof Constants !== \"undefined\" && Constants !== null) && Constants.USER_LOCALE !== 'en') {\n            I18n.RAND = Math.floor((Math.random() * 20) + 1);\n          }\n          if (I18n.RAND === 1 && I18n.NUM_MISSED < 4) {\n            I18n.NUM_MISSED += 1;\n\n            /*global: jQuery override static analyzer warning */\n            if (typeof jQuery !== \"undefined\" && jQuery !== null) {\n              jQuery.ajax({\n                url: \"/missed_translation_log\",\n                type: \"POST\",\n                data: {\n                  message: s,\n                  comment: comment,\n                  project: project\n                }\n              });\n            }\n          }\n          r = s;\n        }\n      }\n      I18n.add_i18n_message(s, r, s);\n      return r;\n    };\n\n    I18n.fake_translate = function(str, locale) {\n      var alpha_num, c, hebrew_alphabet_start, lowercase_latin_alphabet_start, out_str, _j, _ref;\n      if (locale === \"xx_LS\") {\n        str = str + \"SSSSSSSSSSSSSSSSSSSSSSSSS\";\n      }\n      if (locale === \"xx_AC\" && !/</.test(str)) {\n        str = str.toUpperCase();\n      }\n      if (locale === \"xx_HA\") {\n        str = \"[javascript]\" + str;\n      }\n      if (locale === \"xx_RL\" && !/</.test(str) && !/%/.test(str)) {\n        lowercase_latin_alphabet_start = 97;\n        hebrew_alphabet_start = 1488;\n        out_str = \"\";\n        str = str.toLowerCase();\n        for (i = _j = 0, _ref = str.length; 0 <= _ref ? _j < _ref : _j > _ref; i = 0 <= _ref ? ++_j : --_j) {\n          alpha_num = str.charCodeAt(i) - lowercase_latin_alphabet_start;\n          if ((0 <= alpha_num && alpha_num < 26)) {\n            out_str += String.fromCharCode(hebrew_alphabet_start + alpha_num);\n          } else {\n            out_str += str[i];\n          }\n        }\n        str = out_str;\n      }\n      if (locale === \"xx_AE\" && !/</.test(str) && !/%/.test(str)) {\n        str = ((function() {\n          var _k, _ref1, _ref2, _results;\n          _results = [];\n          for (i = _k = 0, _ref1 = str.length; 0 <= _ref1 ? _k < _ref1 : _k > _ref1; i = 0 <= _ref1 ? ++_k : --_k) {\n            c = str.charAt(i);\n            _results.push((_ref2 = ACCENT_MAP[c]) != null ? _ref2 : c);\n          }\n          return _results;\n        })()).join('');\n      }\n      return str;\n    };\n\n    I18n.locale_is_fake = function(locale) {\n      return locale.indexOf(\"xx_\") !== -1;\n    };\n\n    I18n.ungettext = function() {\n      var args, comment, english_string, langpack, locale, lookup, n, plural, plural_class, project, ret, singular, string_key, _ref;\n      singular = arguments[0], plural = arguments[1], n = arguments[2], args = 4 <= arguments.length ? __slice.call(arguments, 3) : [];\n      _ref = PyKeywordArguments.apply(null, [[['project', 'web'], 'comment']].concat(__slice.call(args))), project = _ref.project, comment = _ref.comment;\n      assert(n != null, 'missing number parameter for ungettext');\n      locale = typeof Constants !== \"undefined\" && Constants !== null ? Constants.USER_LOCALE : void 0;\n      if (locale) {\n        if (I18n.locale_is_fake(locale)) {\n          singular = I18n.fake_translate(singular, locale);\n          plural = I18n.fake_translate(plural, locale);\n        } else {\n          string_key = I18nProjects.get_string_key(singular, project, comment);\n          langpack = I18n.get_langpack();\n          lookup = langpack[string_key] || langpack[singular];\n          if (lookup) {\n            if (lookup instanceof String || typeof lookup === \"string\") {\n              return lookup;\n            }\n            plural_class = I18n.PLURAL_RULES_BY_LOCALE[locale](n);\n            if (plural_class in lookup) {\n              ret = lookup[plural_class];\n            }\n          }\n        }\n      }\n      english_string = n === 1 ? singular : plural;\n      if (ret == null) {\n        ret = english_string;\n      }\n      I18n.add_i18n_message(singular, ret, english_string);\n      return ret;\n    };\n\n    I18n.N_ = function() {\n      var args, comment, project, s, _ref;\n      s = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n      _ref = PyKeywordArguments.apply(null, [[['project', 'web'], 'comment']].concat(__slice.call(args))), project = _ref.project, comment = _ref.comment;\n      return new NoOpTranslated(s, project, comment);\n    };\n\n    I18n.E_ = function(s) {\n      return I18n._(s.msg, s.project, s.comment);\n    };\n\n    I18n.render_sentences = function(sentence_list) {\n      var length, s, sentence, which, _j, _len;\n      length = sentence_list.length;\n      if (length === 1) {\n        return sentence_list[0];\n      } else if (length === 2) {\n        return I18n._(\"%s %s\", {\n          comment: \"Two sentences\"\n        }).format(sentence_list);\n      } else if (length === 3) {\n        return I18n._(\"%s %s %s\", {\n          comment: \"Three sentences\"\n        }).format(sentence_list);\n      } else if (length === 4) {\n        return I18n._(\"%s %s %s %s\", {\n          comment: \"Four sentences\"\n        }).format(sentence_list);\n      } else {\n        s = '';\n        which = 0;\n        for (_j = 0, _len = sentence_list.length; _j < _len; _j++) {\n          sentence = sentence_list[_j];\n          s += sentence;\n          if (which !== (length - 1)) {\n            s += I18n._(\" \", {\n              comment: \"Sentence separator character\"\n            });\n          }\n          which += 1;\n        }\n        return s;\n      }\n    };\n\n    I18n.i18n_default_project = function(project) {\n      return {\n        _: function() {\n          var args, comment, s, _ref;\n          s = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n          _ref = PyKeywordArguments.apply(null, [[['project', project], 'comment']].concat(__slice.call(args))), project = _ref.project, comment = _ref.comment;\n          return I18n._(s, project, comment);\n        },\n        ungettext: function() {\n          var args, comment, n, plural, singular, _ref;\n          singular = arguments[0], plural = arguments[1], n = arguments[2], args = 4 <= arguments.length ? __slice.call(arguments, 3) : [];\n          _ref = PyKeywordArguments.apply(null, [[['project', project], 'comment']].concat(__slice.call(args))), project = _ref.project, comment = _ref.comment;\n          return I18n.ungettext(singular, plural, n, project, comment);\n        },\n        N_: function() {\n          var args, comment, s, _ref;\n          s = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n          _ref = PyKeywordArguments.apply(null, [[['project', project], 'comment']].concat(__slice.call(args))), project = _ref.project, comment = _ref.comment;\n          return I18n.N_(s, project, comment);\n        },\n        E_: I18n.E_\n      };\n    };\n\n    return I18n;\n\n  })();\n  NoOpTranslated = (function() {\n    function NoOpTranslated(msg, project, comment) {\n      this.msg = msg;\n      this.project = project;\n      this.comment = comment;\n    }\n\n    return NoOpTranslated;\n\n  })();\n  I18nProjects = (function() {\n    function I18nProjects() {}\n\n    I18nProjects.get_message_context = function(project, comment) {\n      var checksum, context, sha_obj;\n      context = void 0;\n      if (project !== \"web\") {\n        context = \"project:\" + project;\n      }\n      if (comment != null) {\n        sha_obj = new jsSHA(comment, \"TEXT\");\n        checksum = sha_obj.getHash(\"SHA-1\", \"HEX\");\n        if (context != null) {\n          context += ' ' + checksum;\n        } else {\n          context = checksum;\n        }\n      }\n      return context;\n    };\n\n    I18nProjects.CONTEXT_DELIMITER = \"\\u0004\";\n\n    I18nProjects.get_string_key = function(string, project, comment) {\n      var context;\n      context = I18nProjects.get_message_context(project, comment);\n      if (context != null) {\n        return context + I18nProjects.CONTEXT_DELIMITER + string;\n      } else {\n        return string;\n      }\n    };\n\n    return I18nProjects;\n\n  })();\n  STUB_IS_ARRAY = function(obj) {\n    if (typeof Array.isArray === 'undefined') {\n      return Object.prototype.toString.call(obj) === '[object Array]';\n    }\n    return Array.isArray(obj);\n  };\n  STUB_BIND = function() {\n    var args, fn, obj;\n    args = Array.prototype.slice.call(arguments);\n    fn = args.shift();\n    obj = args.shift();\n    return function() {\n      return fn.apply(obj, args.concat(Array.prototype.slice.call(arguments)));\n    };\n  };\n  String.prototype.format_sub = function(sub_func) {\n    return this.replace(/%(\\([a-zA-Z0-9_\\-]+\\))?(.\\d+)?(.)/g, STUB_BIND(sub_func, this));\n  };\n  String.prototype.format = function() {\n    var curindex, d, eng, eng_msg_id, r, ret;\n    if (arguments.length === 0) {\n      return this.toString();\n    }\n    d = void 0;\n    curindex = 0;\n    if (arguments.length === 1 && arguments[0] instanceof Object) {\n      d = arguments[0];\n    } else {\n      d = Array.prototype.slice.call(arguments, 0);\n    }\n    r = function(s, key, truncate, type) {\n      var is_ac, parts, result, v;\n      if (!key) {\n        if (!STUB_IS_ARRAY(d)) {\n          d = [d];\n        }\n        assert(curindex > -1, \"Cannot mix named and positional indices in string formatting for string '\" + this + \"'.\");\n        assert(curindex < d.length, \"Insufficient number of items in format for string '\" + this + \"'\");\n        v = d[curindex];\n        curindex++;\n      } else {\n        key = key.slice(1, -1);\n        assert(curindex <= 0, \"Cannot mix named and positional indices in string formatting for string '\" + this + \"'.\");\n        curindex = -1;\n        is_ac = (typeof Constants !== \"undefined\" && Constants !== null ? Constants.USER_LOCALE : void 0) === \"xx_AC\";\n        assert(key in d || (is_ac && key.toLowerCase() in d), \"Key '\" + key + \"' not present during string substitution for string '\" + this + \"'\");\n        v = d[key];\n        if (is_ac) {\n          v = d[key.toLowerCase()];\n        }\n      }\n      assert(typeof v !== \"undefined\", \"value for key '\" + (key || \"\") + \"' is undefined\");\n      result = void 0;\n      if (type === \"s\" || type === \"S\") {\n        result = v.toString();\n      } else if (type === \"d\" || type === \"D\") {\n        result = parseInt(v, 10).toString();\n      } else if (type === \"f\" || type === \"F\") {\n        result = Number(v).toString();\n      } else if (type === \"%\") {\n        return \"%\";\n      } else {\n        assert(false, \"Unexpected format character '\" + type + \"' for string '\" + this + \"'.\");\n      }\n      if (truncate) {\n        truncate = parseInt(truncate.slice(1), 10);\n        if (type === \"f\" || type === \"F\") {\n          if (result.indexOf(\".\" === -1)) {\n            result = result + \".0\";\n          }\n          parts = result.split(\".\");\n          return parts[0] + \".\" + parts[1].slice(0, truncate);\n        } else {\n          return result.slice(0, truncate);\n        }\n      }\n      return result;\n    };\n    ret = this.format_sub(r);\n    if (I18n.messages && this in I18n.messages) {\n      curindex = 0;\n      eng_msg_id = I18n.emessages[this];\n      eng = String.prototype.format_sub.call(eng_msg_id, r);\n      I18n.add_i18n_message(eng_msg_id, ret, eng, this);\n    }\n    return ret;\n  };\n  String.prototype.friendly_format = function() {\n    var numc, r, wordc;\n    r = function(s, key, truncate, type) {\n      if (!key) {\n        if (type === \"s\" || type === \"S\") {\n          return \"[word\" + (wordc++) + \"]\";\n        } else {\n          return \"[number\" + (numc++) + \"]\";\n        }\n      } else {\n        return \"[\" + (key.slice(1, 1).replace('-', '_')) + \"]\";\n      }\n    };\n    numc = 1;\n    wordc = 1;\n    return this.format_sub(r);\n  };\n  String.prototype.blank_format = function() {\n    var r;\n    r = function() {\n      return \"\";\n    };\n    return this.format_sub(r);\n  };\n  String.prototype.strip_tags = function() {\n    return this.replace(/<\\w+(\\s+(\"[^\"]*\"|'[^']*'|[^>])+)?>|<\\/\\w+>/gi, \"\");\n  };\n  window.ungettext = I18n.ungettext;\n  window._ = I18n._;\n  window.N_ = I18n.N_;\n  window.E_ = I18n.E_;\n  window.render_sentences = I18n.render_sentences;\n  return I18n;\n});\n\n//# sourceMappingURL=i18n.map\n;\n",
    "// Generated by CoffeeScript 1.7.1\ndefine('modules/core/notify',['jquery', 'modules/core/i18n'], function($j, i18n) {\n  var Notify;\n  Notify = (function() {\n    function Notify() {}\n\n    Notify.DEFAULT_ERROR = _(\"There was a problem completing this request.\");\n\n    Notify.DEFAULT_SUCCESS = _('Your request completed successfully.');\n\n    Notify.error = function(msg, duration) {\n      if (duration == null) {\n        duration = 10;\n      }\n      msg = msg || this.DEFAULT_ERROR;\n      this._show(msg, duration, \"server-error\");\n      return this.current();\n    };\n\n    Notify.warning = function(msg, duration) {\n      if (duration == null) {\n        duration = 10;\n      }\n      this._show(msg, duration, \"server-warning\");\n      return this.current();\n    };\n\n    Notify.info = function(msg, duration) {\n      if (duration == null) {\n        duration = 10;\n      }\n      this._show(msg, duration, \"server-info\");\n      return this.current();\n    };\n\n    Notify.success = function(msg, duration) {\n      if (duration == null) {\n        duration = 10;\n      }\n      msg = msg || this.DEFAULT_SUCCESS;\n      this._show(msg, duration, \"server-success\");\n      return this.current();\n    };\n\n    Notify.clear = function() {\n      if (this._last_timeout) {\n        clearTimeout(this._last_timeout);\n      }\n      if (this._last_animation) {\n        this._last_animation.stop();\n      }\n      this._last_timeout = null;\n      this._last_animation = null;\n      return $j('#notify').removeClass(\"server-error server-info server-success server-warning\").hide();\n    };\n\n    Notify.isShown = function() {\n      return $j('#notify').is(':visible');\n    };\n\n    Notify.current = function() {\n      return this._last_timeout;\n    };\n\n    Notify._show = function(msg, duration, klass) {\n      this._buildElement();\n      this.clear();\n      this._setMessage(msg);\n      this._showElement(klass);\n      this._scheduleHide(duration);\n      return this.current();\n    };\n\n    Notify._buildElement = function() {\n      var notify_markup;\n      if ($j('#notify').length) {\n        return;\n      }\n      notify_markup = '<div id=\"notify-wrapper\"> <span id=\"notify\"> <span id=\"notify-msg\" /> </span> </div>';\n      return $j('body').append(notify_markup);\n    };\n\n    Notify._setMessage = function(msg) {\n      var $msg_element;\n      $msg_element = $j('#notify-msg');\n      if (msg.toHTML != null) {\n        return $msg_element.html(msg.toHTML());\n      } else {\n        if (msg instanceof jQuery) {\n          return $msg_element.html(msg);\n        } else {\n          return $msg_element.text(msg);\n        }\n      }\n    };\n\n    Notify._showElement = function(klass) {\n      var $notify;\n      $notify = $j(\"#notify\");\n      $notify.addClass(klass);\n      return this._last_animation = $notify.fadeIn(500);\n    };\n\n    Notify._scheduleHide = function(duration) {\n      return this._last_timeout = setTimeout(this._hide, duration * 1000);\n    };\n\n    Notify._hide = function() {\n      var $notify;\n      $notify = $j(\"#notify\");\n      Notify._last_animation = $notify.fadeOut(1000);\n      return Notify._last_timeout = null;\n    };\n\n    return Notify;\n\n  })();\n  window.Notify = Notify;\n  return Notify;\n});\n\n//# sourceMappingURL=notify.map\n;\n",
    "// Generated by CoffeeScript 1.7.1\ndefine('modules/core/ordered_dictionary',[], function() {\n  'The following is a smashed version of a array and a dictionary that enables us\\nto have a dictionary mapping that is sorted.';\n  var OrderedDictionary;\n  OrderedDictionary = (function() {\n    OrderedDictionary.list = [];\n\n    OrderedDictionary.dict = {};\n\n    function OrderedDictionary(list, dict) {\n      this.list = list;\n      this.dict = dict;\n      return;\n    }\n\n    OrderedDictionary.prototype.push = function(key, value) {\n      this.list.push(key);\n      this.dict[key] = value;\n    };\n\n    OrderedDictionary.prototype.remove = function(key) {\n      this.list.removeItem(key);\n      delete this.dict[key];\n    };\n\n    OrderedDictionary.prototype.indexOfKey = function(key) {\n      return this.list.indexOf(key);\n    };\n\n    OrderedDictionary.prototype.keyAtIndex = function(index) {\n      return this.list[index];\n    };\n\n    OrderedDictionary.prototype.valueFromKey = function(key) {\n      return this.dict[key];\n    };\n\n    OrderedDictionary.prototype.valueAtIndex = function(index) {\n      return this.dict[this.list[index]];\n    };\n\n    OrderedDictionary.prototype.getValues = function() {\n      var key;\n      return (function() {\n        var _i, _len, _ref, _results;\n        _ref = this.list;\n        _results = [];\n        for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n          key = _ref[_i];\n          _results.push(this.dict[key]);\n        }\n        return _results;\n      }).call(this);\n    };\n\n    OrderedDictionary.prototype.length = function() {\n      return this.list.length;\n    };\n\n    OrderedDictionary.prototype.insertAtIndex = function(index, key, value) {\n      this.list.splice(index, 0, key);\n      return this.dict[key] = value;\n    };\n\n    return OrderedDictionary;\n\n  })();\n  window.OrderedDictionary = OrderedDictionary;\n  return OrderedDictionary;\n});\n\n//# sourceMappingURL=ordered_dictionary.map\n;\n",
    "// Generated by CoffeeScript 1.7.1\ndefine('modules/clean/hi_res',['jquery'], function($j) {\n  var HiRes;\n  HiRes = (function() {\n    function HiRes($el) {\n      var no_resize;\n      if (!this.constructor._show_hi_res()) {\n        return;\n      }\n      no_resize = $el.attr('data-hi-res-no-resize');\n      this.constructor.set_src($el, $el.attr('data-hi-res'), no_resize);\n      this.constructor.set_bg($el, $el.attr('data-hi-res-background'), no_resize);\n    }\n\n    HiRes.set_src = function($img, hi_res_src, hi_res_no_resize) {\n      if (!this._show_hi_res()) {\n        return;\n      }\n      if (hi_res_src && hi_res_src !== $img.attr('src')) {\n        return this._replace($img, hi_res_src, !hi_res_no_resize, this._replace_img);\n      }\n    };\n\n    HiRes.set_bg = function($el, hi_res_src, hi_res_no_resize) {\n      if (!this._show_hi_res()) {\n        return;\n      }\n      return this._replace($el, hi_res_src, !hi_res_no_resize, this._replace_background);\n    };\n\n    HiRes._show_hi_res = function() {\n      return 'devicePixelRatio' in window && window.devicePixelRatio > 1;\n    };\n\n    HiRes._replace = function($el, hi_res_src, resize, replace_fn) {\n      var img;\n      if (!hi_res_src) {\n        return;\n      }\n      img = new Image();\n      img.src = hi_res_src;\n      return $j(img).on('load', function() {\n        return replace_fn($el, hi_res_src, resize, img.width, img.height);\n      });\n    };\n\n    HiRes._replace_img = function($el, hi_res_src, resize, w, h) {\n      $el.attr('src', hi_res_src);\n      if (resize) {\n        $el.width(w / 2);\n        return $el.height(h / 2);\n      }\n    };\n\n    HiRes._replace_background = function($el, hi_res, resize, w, h) {\n      var background_image_style;\n      background_image_style = \"url('%(src)s')\".format({\n        src: hi_res\n      });\n      $el.css('backgroundImage', background_image_style);\n      if (resize) {\n        return $el.css('backgroundSize', \"\" + (w / 2) + \"px \" + (h / 2) + \"px\");\n      }\n    };\n\n    return HiRes;\n\n  })();\n  return HiRes;\n});\n\n//# sourceMappingURL=hi_res.map\n;\n",
    "// Generated by CoffeeScript 1.7.1\ndefine('modules/clean/job_progress',['jquery'], function($j) {\n  var Job, ModalProgress, ProgressBar;\n  ProgressBar = {\n    make: function(id, width) {\n      var $inner, $opct, $outer, $over, $under, $upct, wstr;\n      if (width == null) {\n        width = 300;\n      }\n      wstr = width.toString() + \"px\";\n      $outer = $j('<div />', {\n        \"class\": 'outer-progress-bar'\n      }).css({\n        width: wstr\n      });\n      $inner = $j('<div />', {\n        \"class\": 'inner-progress-bar',\n        id: \"pb_\" + id\n      }).css({\n        width: wstr\n      });\n      $under = $j('<div />', {\n        \"class\": 'under-pb progress-bar'\n      }).css({\n        width: wstr\n      });\n      $over = $j('<div />', {\n        \"class\": 'over-pb progress-bar',\n        id: \"pb_\" + id + \"_over\"\n      }).css({\n        display: 'none'\n      });\n      $upct = $j('<div />', {\n        \"class\": 'pb-percentage',\n        id: \"pb_\" + id + \"_upct\"\n      }).css({\n        width: wstr\n      });\n      $opct = $j('<div />', {\n        \"class\": 'pb-percentage',\n        id: \"pb_\" + id + \"_opct\"\n      }).css({\n        width: wstr\n      });\n      $under.append($upct);\n      $over.append($opct);\n      $inner.append($under);\n      $inner.append($over);\n      $outer.append($inner);\n      $over.data('progress-width', width);\n      return $outer;\n    },\n    set: function(id, frac) {\n      var $over, progress_width, width;\n      $over = $j(\"#pb_\" + id + \"_over\");\n      if (!$over) {\n        return;\n      }\n      frac = Math.min(frac, 1);\n      progress_width = $over.data('progress-width');\n      width = String(progress_width * frac) + \"px\";\n      $over.show();\n      return $over.css({\n        backgroundColor: \"#348DD3\",\n        overflow: 'hidden',\n        width: width\n      });\n    }\n  };\n  Job = {\n    complete: {},\n    handled: function(job_id) {\n      var already_handled;\n      if (!job_id) {\n        return false;\n      }\n      already_handled = !!Job.complete[job_id];\n      Job.complete[job_id] = true;\n      return already_handled;\n    },\n    peek: function(job_id) {\n      if (!job_id) {\n        return false;\n      }\n      return !!Job.complete[job_id];\n    }\n  };\n  ModalProgress = {\n    show: function(text) {\n      var $loading_div, _ref;\n      if (!text) {\n        return;\n      }\n\n      /*global: DBModalStack may or may not exist, doesn't matter */\n      if (typeof DBModalStack !== \"undefined\" && DBModalStack !== null) {\n        if ((_ref = DBModalStack.top()) != null) {\n          _ref.hide();\n        }\n      }\n      $loading_div = $j('#modal-progress-overlay');\n      if ($j('#browse-box').length) {\n        $loading_div.clonePosition($j('#browse-box'));\n      } else if ($j('#gallery-view-media').length) {\n        $loading_div.clonePosition($j('#gallery-view-media'));\n      } else {\n        $loading_div.css({\n          position: 'fixed',\n          width: '100%',\n          height: '100%'\n        });\n      }\n      if (!$loading_div.width()) {\n        return;\n      }\n      $j('#modal-progress-text').text(text);\n      $j('#modal-progress-bar').css({\n        opacity: 1\n      });\n      $j('#modal-progress-bar').html(ProgressBar.make(\"modal-progress\", 150, \"\"));\n      $loading_div.fadeTo(250, 0.7);\n      return $j('#modal-progress-content').fadeIn(250);\n    },\n    update: function(progress) {\n      var parts;\n      if (progress.indexOf(\"/\") > 0) {\n        parts = progress.split(\"/\");\n        progress = Number(parts[0]) / Number(parts[1]);\n        if (isNaN(progress)) {\n          return;\n        }\n      }\n      return ProgressBar.set(\"modal-progress\", progress);\n    },\n    hide: function() {\n      $j(\"#modal-progress-overlay\").fadeOut(250);\n      return $j(\"#modal-progress-content\").fadeOut(250);\n    }\n  };\n  window.ModalProgress = ModalProgress;\n  window.Job = Job;\n  return {\n    ModalProgress: ModalProgress,\n    Job: Job\n  };\n});\n\n//# sourceMappingURL=job_progress.map\n;\n",
    "// Generated by CoffeeScript 1.7.1\nvar __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\ndefine('modules/clean/storage',[], function() {\n  var BrowserStorage, LocalStorage, SessionStorage;\n  BrowserStorage = (function() {\n    function BrowserStorage() {}\n\n    BrowserStorage.storage = void 0;\n\n    BrowserStorage.get = function(key) {\n      if (this.storage && window.JSON) {\n        return JSON.parse(this.storage.getItem(key));\n      }\n    };\n\n    BrowserStorage.set = function(key, value) {\n      if (!this.storage || !window.JSON) {\n        return;\n      }\n      return this.storage.setItem(key, JSON.stringify(value));\n    };\n\n    return BrowserStorage;\n\n  })();\n  SessionStorage = (function(_super) {\n    __extends(SessionStorage, _super);\n\n    function SessionStorage() {\n      return SessionStorage.__super__.constructor.apply(this, arguments);\n    }\n\n    SessionStorage.storage = window.sessionStorage;\n\n    return SessionStorage;\n\n  })(BrowserStorage);\n  LocalStorage = (function(_super) {\n    __extends(LocalStorage, _super);\n\n    function LocalStorage() {\n      return LocalStorage.__super__.constructor.apply(this, arguments);\n    }\n\n    LocalStorage.storage = window.localStorage;\n\n    return LocalStorage;\n\n  })(BrowserStorage);\n  return {\n    SessionStorage: SessionStorage,\n    LocalStorage: LocalStorage\n  };\n});\n\n//# sourceMappingURL=storage.map\n;\n",
    "// Generated by CoffeeScript 1.7.1\ndefine('modules/clean/undo',['jquery', 'modules/core/html', 'modules/core/i18n', 'modules/core/notify'], function($j, HTML, i18n, Notify) {\n  var UndoAction;\n  UndoAction = (function() {\n    function UndoAction() {}\n\n    UndoAction.perform_undo = function() {\n      if (this.undo_handler != null) {\n        this.undo_handler(this.undo_info);\n        return this.undo_handler = this.undo_info = null;\n      }\n    };\n\n    UndoAction.notifyWithUndo = function(msg, undo_info, undo_handler) {\n      var container, undo_link;\n      if (!undo_info) {\n        return Notify.success(msg);\n      }\n      this.undo_info = undo_info;\n      this.undo_handler = undo_handler;\n      container = $j('<span />');\n      if (msg.toHTML != null) {\n        container.html(msg.toHTML());\n      } else {\n        container.text(msg);\n      }\n      undo_link = $j(\"<a/>\", {\n        href: \"#\"\n      }).text(_(\"Undo\"));\n      undo_link.on(\"click\", function() {\n        UndoAction.perform_undo();\n        return false;\n      });\n      container.append(\"&nbsp;\").append(undo_link);\n      return this.undo_notification = Notify.success(container, 30);\n    };\n\n    return UndoAction;\n\n  })();\n  window.UndoAction = UndoAction;\n  return UndoAction;\n});\n\n//# sourceMappingURL=undo.map\n;\n",
    "// Generated by CoffeeScript 1.7.1\nvar __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\ndefine('modules/clean/ajax',['jquery', 'external/underscore', 'modules/core/cookies', 'modules/core/exception', 'modules/core/html', 'modules/core/i18n', 'modules/core/notify', 'modules/core/uri', 'modules/clean/job_progress', 'modules/clean/storage', 'modules/clean/undo'], function($j, $u, cookies, JSException, HTML, _arg, Notify, URI, job_progress, storage, UndoAction) {\n  var AUTH_BEHAVIORS, AsyncProgressWatcherBehavior, AuthenticatedRequest, BackgroundRequest, BaseAjaxBehavior, CSRFErrorReloadBehavior, CSRFTokenInjectionBehavior, ChainedAjaxBehavior, DEBUG_BEHAVIORS, DebugErrorBehavior, DebugPanelCProfileBehavior, DebugPanelGandalfBehavior, FORM_WEB_BEHAVIORS, FormWebRequest, JOB_BEHAVIORS, LogRequestErrorBehavior, NOTIFY_BEHAVIORS, ProgressWatcherBehavior, RESPONSE_PREFIX_ASYNC_DONE, RESPONSE_PREFIX_ASYNC_ERROR, RESPONSE_PREFIX_ASYNC_JOB, RESPONSE_PREFIX_NOTIFY_ERROR, Request, SubjectUserInjectionBehavior, UserNotifyErrorBehavior, UserNotifyStillWorkingBehavior, ValidationSchemaRequest, WEB_BEHAVIORS, WEB_PROGRESS_BEHAVIORS, WebProgressRequest, WebRequest, chain_behavior, exports, _;\n  _ = _arg._;\n  RESPONSE_PREFIX_NOTIFY_ERROR = 'err:';\n  RESPONSE_PREFIX_ASYNC_JOB = 'async_task_started:';\n  RESPONSE_PREFIX_ASYNC_ERROR = 'async_task_err:';\n  RESPONSE_PREFIX_ASYNC_DONE = 'done:';\n  Request = function(options, ajax_behaviors) {\n    var base, behavior, type, xhr;\n    if (options == null) {\n      options = {};\n    }\n    if (ajax_behaviors == null) {\n      ajax_behaviors = [];\n    }\n    base = new BaseAjaxBehavior(options);\n    behavior = chain_behavior(base, ajax_behaviors);\n    if (options.type != null) {\n      type = options.type;\n    } else if (options.method != null) {\n      if (!(typeof Constants !== \"undefined\" && Constants !== null ? Constants.IS_PROD : void 0)) {\n        console.log('Expected \"type\" attribute; received \"method\"');\n      }\n      type = options.method;\n    } else {\n      type = 'POST';\n    }\n    xhr = $j.ajax({\n      url: behavior.url(),\n      type: type,\n      noDropboxDefaults: true,\n      data: behavior.data(),\n      dataType: options.dataType || 'text',\n      traditional: behavior.traditional(),\n      xhrFields: behavior.xhrFields(),\n      success: function(data, status, xhr) {\n        return behavior.success(data, status, xhr);\n      },\n      error: function(xhr, status, error_string) {\n        return behavior.error(xhr, status, error_string);\n      },\n      complete: function(xhr, status) {\n        return behavior.complete(xhr, status);\n      }\n    });\n    return behavior.request(xhr);\n  };\n  chain_behavior = function(base, to_chain) {\n    var behavior, chain, last, _i, _j, _len, _len1, _ref;\n    chain = [base];\n    _ref = $u(to_chain.slice(0)).reverse();\n    for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n      behavior = _ref[_i];\n      chain.push(new behavior());\n    }\n    last = null;\n    for (_j = 0, _len1 = chain.length; _j < _len1; _j++) {\n      behavior = chain[_j];\n      if (last) {\n        behavior.next = last;\n      }\n      last = behavior;\n    }\n    return last;\n  };\n  BaseAjaxBehavior = (function() {\n    function BaseAjaxBehavior(options) {\n      if (options == null) {\n        options = {};\n      }\n      this.options = function() {\n        return options;\n      };\n      this.url = function() {\n        return String(options.url || \"\");\n      };\n      this.data = function() {\n        return options.data || {};\n      };\n      this.traditional = function() {\n        return options.traditional || false;\n      };\n      this.xhrFields = function() {\n        return options.xhrFields || {};\n      };\n      this.success = options.success || this.identity;\n      this.error = options.error || this.identity;\n      this.complete = options.complete || this.identity;\n      this.request = this.identity;\n    }\n\n    BaseAjaxBehavior.prototype.identity = function(x) {\n      return x;\n    };\n\n    return BaseAjaxBehavior;\n\n  })();\n  ChainedAjaxBehavior = (function() {\n    function ChainedAjaxBehavior() {}\n\n    ChainedAjaxBehavior.prototype.options = function() {\n      return this.next.options();\n    };\n\n    ChainedAjaxBehavior.prototype.url = function() {\n      return this.next.url();\n    };\n\n    ChainedAjaxBehavior.prototype.data = function() {\n      return this.next.data();\n    };\n\n    ChainedAjaxBehavior.prototype.traditional = function() {\n      return this.next.traditional();\n    };\n\n    ChainedAjaxBehavior.prototype.xhrFields = function() {\n      return this.next.xhrFields();\n    };\n\n    ChainedAjaxBehavior.prototype.success = function(data, status, xhr) {\n      return this.next.success(data, status, xhr);\n    };\n\n    ChainedAjaxBehavior.prototype.error = function(xhr, status, error_string) {\n      return this.next.error(xhr, status, error_string);\n    };\n\n    ChainedAjaxBehavior.prototype.complete = function(xhr, status) {\n      return this.next.complete(xhr, status);\n    };\n\n    ChainedAjaxBehavior.prototype.request = function(xhr) {\n      return this.next.request(xhr);\n    };\n\n    return ChainedAjaxBehavior;\n\n  })();\n  CSRFTokenInjectionBehavior = (function(_super) {\n    __extends(CSRFTokenInjectionBehavior, _super);\n\n    function CSRFTokenInjectionBehavior() {\n      return CSRFTokenInjectionBehavior.__super__.constructor.apply(this, arguments);\n    }\n\n    CSRFTokenInjectionBehavior.prototype.SUPPORTED_TLDS = ['dropbox.com', 'carousel.com'];\n\n    CSRFTokenInjectionBehavior.prototype.data = function() {\n      var injected;\n      JSException.assert(this._is_db_domain(), 'injecting CSRF token into request to non-dropbox domain');\n      injected = {\n        is_xhr: true,\n        t: Cookies.read(Constants.JS_CSRF_COOKIE) || ''\n      };\n      return $j.extend(injected, this.next.data());\n    };\n\n    CSRFTokenInjectionBehavior.prototype._is_db_domain = function() {\n      var authority, authority_parts;\n      authority = URI.parse(String(this.url())).authority;\n      if (!authority) {\n        return true;\n      }\n      authority_parts = authority.split('.');\n      return $u.reduce(this.SUPPORTED_TLDS, function(memo, tld) {\n        var authority_domain, tld_parts;\n        tld_parts = tld.split('.');\n        authority_domain = authority_parts.slice(-1 * tld_parts.length).join('.');\n        return memo || tld === authority_domain;\n      }, false);\n    };\n\n    return CSRFTokenInjectionBehavior;\n\n  })(ChainedAjaxBehavior);\n  SubjectUserInjectionBehavior = (function(_super) {\n    __extends(SubjectUserInjectionBehavior, _super);\n\n    function SubjectUserInjectionBehavior() {\n      return SubjectUserInjectionBehavior.__super__.constructor.apply(this, arguments);\n    }\n\n    SubjectUserInjectionBehavior.prototype.data = function() {\n      var data, options;\n      data = this.next.data();\n      options = this.options();\n      if (options.subject_user && !data[Constants.UID_PARAM_NAME]) {\n        data[Constants.UID_PARAM_NAME] = String(options.subject_user);\n      }\n      return data;\n    };\n\n    return SubjectUserInjectionBehavior;\n\n  })(ChainedAjaxBehavior);\n  CSRFErrorReloadBehavior = (function(_super) {\n    __extends(CSRFErrorReloadBehavior, _super);\n\n    function CSRFErrorReloadBehavior() {\n      return CSRFErrorReloadBehavior.__super__.constructor.apply(this, arguments);\n    }\n\n    CSRFErrorReloadBehavior.prototype.error = function(xhr, status, error_string) {\n      var last_timestamp, now_timestamp;\n      if (xhr.status === 403) {\n        last_timestamp = storage.SessionStorage.get('reload-timestamp');\n        now_timestamp = new Date().getTime();\n        if (!last_timestamp || now_timestamp - last_timestamp > 30 * 1000) {\n          storage.SessionStorage.set('reload-timestamp', now_timestamp);\n          window.location.reload(true);\n        }\n      }\n      return this.next.error(xhr, status, error_string);\n    };\n\n    return CSRFErrorReloadBehavior;\n\n  })(ChainedAjaxBehavior);\n  DebugPanelCProfileBehavior = (function(_super) {\n    __extends(DebugPanelCProfileBehavior, _super);\n\n    function DebugPanelCProfileBehavior() {\n      return DebugPanelCProfileBehavior.__super__.constructor.apply(this, arguments);\n    }\n\n    DebugPanelCProfileBehavior.prototype.data = function() {\n      var data, injected;\n      data = this.next.data();\n      if (!Constants.CPROFILE_ENABLED) {\n        return data;\n      }\n      injected = {\n        parent_request_id: Constants.REQUEST_ID,\n        cProfile: Constants.CPROFILE_PARAMETER\n      };\n      return $j.extend(injected, data);\n    };\n\n    DebugPanelCProfileBehavior.prototype.success = function(data, status, xhr) {\n      this._report_cprofile(data, status, xhr);\n      return this.next.success(data, status, xhr);\n    };\n\n    DebugPanelCProfileBehavior.prototype._report_cprofile = function(data, status, xhr) {\n      var cprofile, cprofile_link, existing_links;\n      cprofile = $j('#cprofile');\n      if (!cprofile.length) {\n        return;\n      }\n      cprofile_link = this._build_cprofile_link(xhr);\n      existing_links = cprofile.find('.ajax');\n      if (existing_links.length >= 10) {\n        existing_links.last().remove();\n      }\n      return cprofile.prepend(cprofile_link);\n    };\n\n    DebugPanelCProfileBehavior.prototype._build_cprofile_link = function(xhr) {\n      var host, original_request_id, profile_link, query, server_response_time, url, _i, _len, _ref;\n      original_request_id = xhr.getResponseHeader('X-Dropbox-Request-Id');\n      server_response_time = xhr.getResponseHeader(\"X-Server-Response-Time\") || \"-1\";\n      query = {\n        request_id: \"\" + Constants.REQUEST_ID + \"-\" + original_request_id\n      };\n      url = this.url();\n      if (url.indexOf(Constants.BLOCK_CLUSTER) !== -1) {\n        query['block'] = 1;\n      } else {\n        _ref = Constants.BATCH_THUMB_ENDPOINTS;\n        for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n          host = _ref[_i];\n          if (url.indexOf(host) !== -1) {\n            query['block'] = 1;\n            break;\n          }\n        }\n      }\n      url = url.replace(/[^/]*\\/\\/[^/]+/, '').replace(/\\?.*$/, '');\n      profile_link = $j('<a class=\"ajax\" target=\"_new\" />').attr('href', String(URI({\n        path: '/profile/cprofile',\n        query: query\n      }))).text(\"Ajax: \" + url + \" (\" + server_response_time + \"ms)\");\n      return profile_link;\n    };\n\n    return DebugPanelCProfileBehavior;\n\n  })(ChainedAjaxBehavior);\n  DebugPanelGandalfBehavior = (function(_super) {\n    __extends(DebugPanelGandalfBehavior, _super);\n\n    function DebugPanelGandalfBehavior() {\n      return DebugPanelGandalfBehavior.__super__.constructor.apply(this, arguments);\n    }\n\n    DebugPanelGandalfBehavior.prototype.data = function() {\n      var data;\n      data = this.next.data();\n      if (!Constants.GANDALF_PANEL) {\n        return data;\n      }\n      return $j.extend({\n        gandalf_panel: 1\n      }, data);\n    };\n\n    DebugPanelGandalfBehavior.prototype.success = function(data, status, xhr) {\n      this._report_gandalf(data, status, xhr);\n      return this.next.success(data, status, xhr);\n    };\n\n    DebugPanelGandalfBehavior.prototype._report_gandalf = function(data, status, xhr) {\n      var _ref;\n      if ($j('#gandalf_panel').length && this.url().substring(0, 14) !== '/gandalf_panel') {\n        return (_ref = window.gandalf_panel) != null ? _ref.add(this.url(), xhr.getResponseHeader('X-Dropbox-Request-Id')) : void 0;\n      }\n    };\n\n    return DebugPanelGandalfBehavior;\n\n  })(ChainedAjaxBehavior);\n  LogRequestErrorBehavior = (function(_super) {\n    __extends(LogRequestErrorBehavior, _super);\n\n    function LogRequestErrorBehavior() {\n      return LogRequestErrorBehavior.__super__.constructor.apply(this, arguments);\n    }\n\n    LogRequestErrorBehavior.prototype.error = function(xhr, status, error_string) {\n      this._log_error(xhr, status, error_string);\n      return this.next.error(xhr, status, error_string);\n    };\n\n    LogRequestErrorBehavior.prototype._log_error = function(xhr, status, error_string) {\n      var logging_data, logging_uri;\n      if (status !== 0 && status < 400) {\n        return;\n      }\n      logging_data = {\n        url: this.url(),\n        response_code: xhr.status,\n        source_type: \"web\",\n        request_id: xhr.getResponseHeader('X-Dropbox-Request-Id')\n      };\n      logging_uri = URI({\n        path: '/web_response_code_log'\n      });\n      return AuthenticatedRequest({\n        url: logging_uri,\n        data: logging_data\n      });\n    };\n\n    return LogRequestErrorBehavior;\n\n  })(ChainedAjaxBehavior);\n  DebugErrorBehavior = (function(_super) {\n    __extends(DebugErrorBehavior, _super);\n\n    function DebugErrorBehavior() {\n      return DebugErrorBehavior.__super__.constructor.apply(this, arguments);\n    }\n\n    DebugErrorBehavior.prototype.error = function(xhr, status, error_string) {\n      this._notify_dev(xhr, status, error_string);\n      return this.next.error(xhr, status, error_string);\n    };\n\n    DebugErrorBehavior.prototype._notify_dev = function(xhr, status, error_string) {\n      var container, debug_link, url;\n      if (!(typeof Constants !== \"undefined\" && Constants !== null ? Constants.IS_PROD : void 0) && xhr.status === 500 && xhr.getResponseHeader('X-Debug-Url')) {\n        url = xhr.getResponseHeader('X-Debug-Url');\n        container = $j('<span />');\n        container.text(Notify.DEFAULT_ERROR);\n        debug_link = $j(\"<a/>\", {\n          href: url,\n          target: '_blank'\n        }).text(_('View debug'));\n        container.append(\"&nbsp;\").append(debug_link);\n        return Notify.error(new HTML(container.html()));\n      }\n    };\n\n    return DebugErrorBehavior;\n\n  })(ChainedAjaxBehavior);\n  UserNotifyErrorBehavior = (function(_super) {\n    __extends(UserNotifyErrorBehavior, _super);\n\n    function UserNotifyErrorBehavior() {\n      return UserNotifyErrorBehavior.__super__.constructor.apply(this, arguments);\n    }\n\n    UserNotifyErrorBehavior.prototype.success = function(data, status, xhr) {\n      var error_msg;\n      if (!xhr.responseText.length) {\n        return this.next.error(xhr, status, 'empty response');\n      } else if (xhr.responseText.indexOf(RESPONSE_PREFIX_NOTIFY_ERROR) === 0) {\n        error_msg = xhr.responseText.substr(RESPONSE_PREFIX_NOTIFY_ERROR.length);\n        Notify.error(error_msg);\n        return this.next.error(xhr, status, 'server error response');\n      }\n      return this.next.success(data, status, xhr);\n    };\n\n    return UserNotifyErrorBehavior;\n\n  })(ChainedAjaxBehavior);\n  UserNotifyStillWorkingBehavior = (function(_super) {\n    __extends(UserNotifyStillWorkingBehavior, _super);\n\n    function UserNotifyStillWorkingBehavior() {\n      this._clear_working_msg = __bind(this._clear_working_msg, this);\n      return UserNotifyStillWorkingBehavior.__super__.constructor.apply(this, arguments);\n    }\n\n    UserNotifyStillWorkingBehavior.prototype.request = function(xhr) {\n      this.xhr = xhr;\n      setTimeout((function(_this) {\n        return function() {\n          if (_this._request_finished()) {\n            return;\n          }\n          if (_this._should_show_working_msg()) {\n            _this._show_working_msg();\n            return _this.xhr.done(_this._clear_working_msg);\n          }\n        };\n      })(this), 4000);\n      return this.next.request(this.xhr);\n    };\n\n    UserNotifyStillWorkingBehavior.prototype._request_finished = function() {\n      return this.xhr.readyState === 4;\n    };\n\n    UserNotifyStillWorkingBehavior.prototype._should_show_working_msg = function() {\n      return Notify.isShown() && Notify.current() !== UndoAction.undo_notification;\n    };\n\n    UserNotifyStillWorkingBehavior.prototype._show_working_msg = function() {\n      return this.notification = Notify.success(_('Still working...'));\n    };\n\n    UserNotifyStillWorkingBehavior.prototype._clear_working_msg = function() {\n      if (Notify.isShown() && this.notification === Notify.current()) {\n        return Notify.clear();\n      }\n    };\n\n    return UserNotifyStillWorkingBehavior;\n\n  })(ChainedAjaxBehavior);\n  ProgressWatcherBehavior = (function(_super) {\n    __extends(ProgressWatcherBehavior, _super);\n\n    function ProgressWatcherBehavior() {\n      this._watch = __bind(this._watch, this);\n      return ProgressWatcherBehavior.__super__.constructor.apply(this, arguments);\n    }\n\n    ProgressWatcherBehavior.prototype.data = function() {\n      var data, subject_user;\n      this.job_id = ProgressWatcherBehavior.generate_job_id();\n      data = this.next.data();\n      subject_user = this.options().subject_user;\n      if (subject_user) {\n        this.uid = data[Constants.UID_PARAM_NAME] || String(subject_user);\n      }\n      return $j.extend({\n        job_id: this.job_id\n      }, data);\n    };\n\n    ProgressWatcherBehavior.prototype.request = function(xhr) {\n      this._interval = 1000;\n      this._failures = 0;\n      this._watch_count = 0;\n      this._watch_id = setInterval(this._watch, this._interval);\n      return this.next.request(xhr);\n    };\n\n    ProgressWatcherBehavior.prototype.success = function(data, status, xhr) {\n      if (!job_progress.Job.handled(this.job_id)) {\n        return this.next.success(data, status, xhr);\n      }\n    };\n\n    ProgressWatcherBehavior.prototype.error = function(xhr, status, error_string) {\n      if (!job_progress.Job.handled(this.job_id)) {\n        return this.next.error(xhr, status, error_string);\n      }\n    };\n\n    ProgressWatcherBehavior.prototype.complete = function(xhr, status) {\n      if (!job_progress.Job.handled(this.job_id)) {\n        return this.next.complete(xhr, status);\n      }\n    };\n\n    ProgressWatcherBehavior.prototype._watch = function() {\n      if (job_progress.Job.peek(this.job_id)) {\n        return this._stop();\n      }\n      this._watch_count++;\n      if (this._watch_count % 10 === 0) {\n        clearInterval(this._watch_id);\n        this._interval = Math.min(Math.floor(this._interval * 1.5), 30000);\n        this._watch_id = setInterval(this._watch, this._interval);\n      }\n      this._show_progress_modal();\n      return this._fetch_progress();\n    };\n\n    ProgressWatcherBehavior.prototype._stop = function() {\n      clearInterval(this._watch_id);\n      return job_progress.ModalProgress.hide();\n    };\n\n    ProgressWatcherBehavior.prototype._show_progress_modal = function() {\n      if (this._modal_shown) {\n        return;\n      }\n      this._modal_shown = true;\n      return job_progress.ModalProgress.show(this.options().progress_text);\n    };\n\n    ProgressWatcherBehavior.prototype._fetch_progress = function() {\n      var status_params;\n      status_params = {};\n      if (this.uid) {\n        status_params[Constants.UID_PARAM_NAME] = this.uid;\n      }\n      return BackgroundRequest({\n        url: \"/job_status/\" + this.job_id,\n        data: status_params,\n        success: (function(_this) {\n          return function(data, status, xhr) {\n            if (xhr.responseText.indexOf('done') === 0) {\n              BackgroundRequest({\n                url: \"/job_results/\" + _this.job_id,\n                success: function(data, status, xhr) {\n                  if (job_progress.Job.handled(this.job_id)) {\n                    return;\n                  }\n                  return this.next.success(data, status, xhr);\n                },\n                error: function(xhr, status, error_string) {\n                  if (job_progress.Job.handled(this.job_id)) {\n                    return;\n                  }\n                  return this.next.error(xhr, status, error_string);\n                }\n              });\n              return _this._stop();\n            } else {\n              return job_progress.ModalProgress.update(xhr.responseText);\n            }\n          };\n        })(this),\n        error: (function(_this) {\n          return function(xhr, status, error_string) {\n            _this._failures++;\n            if (_this._failures < 3) {\n              return;\n            }\n            _this._stop();\n            return _this.next.error(xhr, status, error_string);\n          };\n        })(this)\n      });\n    };\n\n    ProgressWatcherBehavior.generate_job_id = function() {\n      var d, rand_part, time_part;\n      d = new Date();\n      time_part = d.getTime().toString();\n      rand_part = Math.floor(Math.random() * 1000000).toString().lpad(6);\n      return time_part + rand_part;\n    };\n\n    return ProgressWatcherBehavior;\n\n  })(ChainedAjaxBehavior);\n  AsyncProgressWatcherBehavior = (function(_super) {\n    __extends(AsyncProgressWatcherBehavior, _super);\n\n    function AsyncProgressWatcherBehavior() {\n      this._watch = __bind(this._watch, this);\n      return AsyncProgressWatcherBehavior.__super__.constructor.apply(this, arguments);\n    }\n\n    AsyncProgressWatcherBehavior.prototype.data = function() {\n      var data, subject_user;\n      data = this.next.data();\n      subject_user = this.options().subject_user;\n      if (subject_user) {\n        this.uid = data[Constants.UID_PARAM_NAME] || String(subject_user);\n      }\n      return data;\n    };\n\n    AsyncProgressWatcherBehavior.prototype.success = function(data, status, xhr) {\n      if (!this._is_async_job_response(xhr)) {\n        return this.next.success(data, status, xhr);\n      }\n      this.job_id = xhr.responseText.split(':')[1];\n      this._interval = 1000;\n      this._failures = 0;\n      this._watch_count = 0;\n      return this._watch_id = setInterval(this._watch, this._interval);\n    };\n\n    AsyncProgressWatcherBehavior.prototype.complete = function(xhr, status) {\n      if (!this._is_async_job_response(xhr)) {\n        return this.next.complete(xhr, status);\n      }\n    };\n\n    AsyncProgressWatcherBehavior.prototype._is_async_job_response = function(xhr) {\n      var job_id, _ref;\n      if (((_ref = xhr.responseText) != null ? _ref.indexOf(RESPONSE_PREFIX_ASYNC_JOB) : void 0) !== 0) {\n        return false;\n      }\n      job_id = xhr.responseText.split(':')[1];\n      return job_id.match(/^[A-Za-z0-9_\\-=]*$/);\n    };\n\n    AsyncProgressWatcherBehavior.prototype._watch = function() {\n      if (job_progress.Job.peek(this.job_id)) {\n        return this._stop();\n      }\n      this._watch_count++;\n      if (this._watch_count % 10 === 0) {\n        clearInterval(this._watch_id);\n        this._interval = Math.min(Math.floor(this._interval * 1.5), 30000);\n        this._watch_id = setInterval(this._watch, this._interval);\n      }\n      this._show_progress_modal();\n      return this._fetch_progress();\n    };\n\n    AsyncProgressWatcherBehavior.prototype._stop = function() {\n      clearInterval(this._watch_id);\n      return job_progress.ModalProgress.hide();\n    };\n\n    AsyncProgressWatcherBehavior.prototype._show_progress_modal = function() {\n      if (this._modal_shown) {\n        return;\n      }\n      this._modal_shown = true;\n      return job_progress.ModalProgress.show(this.options().progress_text);\n    };\n\n    AsyncProgressWatcherBehavior.prototype._fetch_progress = function() {\n      var status_params;\n      status_params = {};\n      if (this.uid) {\n        status_params[Constants.UID_PARAM_NAME] = this.uid;\n      }\n      return BackgroundRequest({\n        url: \"/async_task_status/\" + this.job_id,\n        data: status_params,\n        success: (function(_this) {\n          return function(data, status, xhr) {\n            var error_msg, msg, text;\n            text = xhr.responseText;\n            if (text.indexOf(RESPONSE_PREFIX_ASYNC_DONE) === 0) {\n              job_progress.Job.handled(_this.job_id);\n              _this._stop();\n              text = text.substr(RESPONSE_PREFIX_ASYNC_DONE.length);\n              xhr.responseText = text;\n              _this.next.success(text, status, xhr);\n              return _this.next.complete(xhr, status);\n            } else if (text.indexOf(RESPONSE_PREFIX_NOTIFY_ERROR) === 0) {\n              job_progress.Job.handled(_this.job_id);\n              _this._stop();\n              error_msg = text.substr(RESPONSE_PREFIX_NOTIFY_ERROR.length);\n              Notify.error(error_msg);\n              _this.next.error(xhr, status, 'server error response');\n              return _this.next.complete(xhr, status);\n            } else if (text.indexOf(RESPONSE_PREFIX_ASYNC_ERROR) === 0) {\n              job_progress.Job.handled(_this.job_id);\n              _this._stop();\n              msg = text.substr(RESPONSE_PREFIX_ASYNC_ERROR.length);\n              Notify.error(new HTML(msg));\n              return _this.next.complete(xhr, status);\n            } else {\n              return job_progress.ModalProgress.update(text);\n            }\n          };\n        })(this),\n        error: (function(_this) {\n          return function(xhr, status, error_string) {\n            _this._failures++;\n            if (_this._failures < 3) {\n              return;\n            }\n            _this._stop();\n            _this.next.error(xhr, status, error_string);\n            return _this.next.complete(xhr, status);\n          };\n        })(this)\n      });\n    };\n\n    return AsyncProgressWatcherBehavior;\n\n  })(ChainedAjaxBehavior);\n  AUTH_BEHAVIORS = [SubjectUserInjectionBehavior, CSRFTokenInjectionBehavior, CSRFErrorReloadBehavior];\n  AuthenticatedRequest = function(options) {\n    if (options == null) {\n      options = {};\n    }\n    return Request(options, AUTH_BEHAVIORS);\n  };\n  NOTIFY_BEHAVIORS = [UserNotifyStillWorkingBehavior];\n  DEBUG_BEHAVIORS = [LogRequestErrorBehavior, DebugErrorBehavior, DebugPanelGandalfBehavior, DebugPanelCProfileBehavior];\n  JOB_BEHAVIORS = [AsyncProgressWatcherBehavior];\n  WEB_BEHAVIORS = [].concat(NOTIFY_BEHAVIORS, [UserNotifyErrorBehavior], DEBUG_BEHAVIORS, AUTH_BEHAVIORS, JOB_BEHAVIORS);\n  WebRequest = function(options) {\n    if (options == null) {\n      options = {};\n    }\n    return Request(options, WEB_BEHAVIORS);\n  };\n  FORM_WEB_BEHAVIORS = [].concat(NOTIFY_BEHAVIORS, DEBUG_BEHAVIORS, AUTH_BEHAVIORS, JOB_BEHAVIORS);\n  FormWebRequest = function(options) {\n    if (options == null) {\n      options = {};\n    }\n    return Request(options, FORM_WEB_BEHAVIORS);\n  };\n  WEB_PROGRESS_BEHAVIORS = [].concat(NOTIFY_BEHAVIORS, [UserNotifyErrorBehavior], DEBUG_BEHAVIORS, AUTH_BEHAVIORS, [ProgressWatcherBehavior], JOB_BEHAVIORS);\n  WebProgressRequest = function(options) {\n    if (options == null) {\n      options = {};\n    }\n    return Request(options, WEB_PROGRESS_BEHAVIORS);\n  };\n  BackgroundRequest = function(options) {\n    if (options == null) {\n      options = {};\n    }\n    return Request(options, [].concat(DEBUG_BEHAVIORS, AUTH_BEHAVIORS));\n  };\n  ValidationSchemaRequest = function(options) {\n    var base, behavior, xhr;\n    if (options == null) {\n      options = {};\n    }\n    base = new BaseAjaxBehavior(options);\n    behavior = chain_behavior(base, AUTH_BEHAVIORS);\n    xhr = $j.ajax({\n      url: behavior.url(),\n      type: 'OPTIONS',\n      noDropboxDefaults: true,\n      data: behavior.data(),\n      success: function(data, status, xhr) {\n        return behavior.success(data, status, xhr);\n      },\n      error: function(xhr, status, error_string) {\n        return behavior.error(xhr, status, error_string);\n      },\n      complete: function(xhr, status) {\n        return behavior.complete(xhr, status);\n      }\n    });\n    return behavior.request(xhr);\n  };\n  exports = {\n    Request: Request,\n    AuthenticatedRequest: AuthenticatedRequest,\n    BackgroundRequest: BackgroundRequest,\n    WebRequest: WebRequest,\n    FormWebRequest: FormWebRequest,\n    WebProgressRequest: WebProgressRequest,\n    ValidationSchemaRequest: ValidationSchemaRequest\n  };\n  window.ajax = exports;\n  return exports;\n});\n\n//# sourceMappingURL=ajax.map\n;\n",
    "define('packaged/core-definition',['modules/core/browser', 'modules/core/controller_registry', 'modules/core/cookies', 'modules/core/dom', 'modules/core/exception', 'modules/core/html', 'modules/core/i18n', 'modules/core/instantiate', 'modules/core/kwargs', 'modules/core/notify', 'modules/core/ordered_dictionary', 'modules/core/uri', 'modules/clean/hi_res', 'modules/clean/ajax', 'modules/clean/job_progress', 'modules/clean/undo'], function () { return true; });\n"
  ]
}